<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="https://georgerpu.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://georgerpu.github.io/" rel="alternate" type="text/html" hreflang="en"/><updated>2024-02-06T07:18:33+00:00</updated><id>https://georgerpu.github.io/feed.xml</id><title type="html">blank</title><subtitle>Personal website and blog </subtitle><entry><title type="html">Economic Possibilities for Ourselves</title><link href="https://georgerpu.github.io/blog/2023/economic-possiblities-for-ourselves/" rel="alternate" type="text/html" title="Economic Possibilities for Ourselves"/><published>2023-09-10T00:00:00+00:00</published><updated>2023-09-10T00:00:00+00:00</updated><id>https://georgerpu.github.io/blog/2023/economic-possiblities-for-ourselves</id><content type="html" xml:base="https://georgerpu.github.io/blog/2023/economic-possiblities-for-ourselves/"><![CDATA[<p>In 1930, during the depths of the Great Depression, John Maynard Keynes wrote a famous essay <a href="http://www.econ.yale.edu/smith/econ116a/keynes1.pdf">“Economic Possibilities for Our Grandchildren”</a> that took the long view of economic history. While large portions of the British and US populations were struggling to find work due to financial crisis, Keynes worried about <em>technological unemployment</em> and its impact on an unprepared society. Most of the essay is focused on the forthcoming social changes necessary to adapt to this problem.</p> <h2 id="predictions">Predictions</h2> <p>However, “Economic Possibilities for Our Grandchildren” is most famous for the predictions it makes.</p> <ol> <li>In 100 years, the standard of living will be 8 times better off.</li> <li>The <strong>economic problem</strong>, the struggle for sustenance, may be solved, or be at least within sight of solution, within a hundred years.</li> <li> <p>Most famously of all, a 15 hour work week, although isn’t really a prediction. The exact quote is</p> <blockquote> <p>Three-hour shifts or a fifteen-hour week may put off the problem for a great while.</p> </blockquote> </li> <li>That culture will reform to stop valuing greed and usury and work.</li> </ol> <p>Only one of these predictions has been met.</p> <ol> <li>US real GDP, that is GDP inflation adjusted to FY2012 dollars, was <a href="https://www.statista.com/statistics/1031678/gdp-and-real-gdp-united-states-1930-2019/">\$1015.8 billion in 1930 and \$20,014.1 billion in 2022</a>. The US population numbers were 123,202,624 in 1930 and 333,287,557 in 2022 according to the US Census estimates. Thus real GDP per capita was \$8243.0 in 1930 and \$60,050.5 in 2022. If standard of living = real GDP per capita, then the standard of living has increased &gt;6x in the past 100 years.</li> <li>If the struggle of sustenance = above the poverty line, then we are nowhere close to eliminating poverty, even in advanced economies. <a href="https://www.census.gov/newsroom/stories/poverty-awareness-month.html">The US poverty rate in 2021 was 11%</a>. In countries with stronger social safety nets, it is lower but still present. <a href="https://www.canada.ca/en/employment-social-development/news/2023/05/canadas-poverty-rate-remains-below-pre-pandemic-levels.html">The Canadian poverty rate in 2021 was 7.4%</a>. <a href="https://www.dw.com/en/germany-what-poverty-looks-like-in-a-rich-country/a-63393501">The German poverty rate has consistently been above 10% for the past &gt;30 years</a>.</li> <li>No country in the world is close to a 15 hour work week. Some Western European countries are close to 1300 annual hours worked, which averages to 25 hours per week across an entire year. The decline in annual working hours has plateaued in many countries as the 35-40 hour workweek has remained the norm. In the US, annual working hours have stabilized around 1800 for decades.</li> <li>US culture has not let go of the Protestant work ethic over the past 100 years. If anything, secularization and the deterioration of civil society in America<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup> has led work to become more central to people’s identities. European work culture is much more inline with Keynes’ predictions.</li> </ol> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Annual_working_time_in_OECD.svg/2560px-Annual_working_time_in_OECD.svg-480.webp"/> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Annual_working_time_in_OECD.svg/2560px-Annual_working_time_in_OECD.svg-800.webp"/> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Annual_working_time_in_OECD.svg/2560px-Annual_working_time_in_OECD.svg-1400.webp"/> <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Annual_working_time_in_OECD.svg/2560px-Annual_working_time_in_OECD.svg.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <h2 id="what-happened">What Happened?</h2> <p>Keynes accurately predicted the degree of economic growth over the coming century. Why did the other predictions–about changes to society–provide inaccurate? For that answer, we need to turn from economics to sociology, politics, and history.</p> <h3 id="prediction-2">Prediction 2</h3> <p>The struggle of sustenance, i.e. poverty, has remained in the lives of those in advanced economies. In fact, <a href="https://www.nytimes.com/2014/06/05/upshot/growth-has-been-good-for-decades-so-why-hasnt-poverty-declined.html">the poverty rate is decoupled from GDP growth</a>. The US poverty rate has oscillated between 10% to 15% for decades, with only 1 big reduction due to the Great Society programs of the 1960s. Keynes’ assumption that GDP growth therefore less poverty is false.</p> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/2023-09-10/us-poverty-rate-480.webp"/> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/2023-09-10/us-poverty-rate-800.webp"/> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/2023-09-10/us-poverty-rate-1400.webp"/> <img src="/assets/img/2023-09-10/us-poverty-rate.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p>If the US is richer than in 1970 on a per person basis, the stable poverty rate is failure of distribution. Indeed, US incomes are highly unequal. The history of income inequality reveals that it is affected by policy, union strength, and modes of production more than GDP growth. Inequality was high in the 1920s, declined in the mid 20th century, and then rose after ~1980. The causes are hotly debated.</p> <p>Income inequality alone isn’t sufficient to explain persistent poverty in the US. In theory, income and wealth distributions can be tightened by the state through taxes and social spending. Taking a global view, some European countries are genuinely close to eliminating poverty through this approach. Their success is stark in contrast to the neoliberal policies of the US.</p> <p>Since the 1950s, the US tax code has become less progressive as taxes on the rich, income and capital gains, dropped. Pre-tax, the Gini coefficient of the US is on par with higher tax Europe but, post-tax, it falls behind by &gt;0.1.</p> <iframe src="https://ourworldindata.org/grapher/inequality-of-incomes-before-and-after-taxes-and-transfers-scatter" loading="lazy" style="width: 100%; height: 600px; border: 0px none;"></iframe> <p>At the same time, the US safety net is weaker than in other developed countries. <a href="https://www.weforum.org/agenda/2021/02/social-spending-highest-lowest-country-comparison-oecd-france-economics-politics-welfare/">In 2019, US spending on social spending was 18.7%, below the OECD average of 20%</a>. Most Western European states had social spending as &gt;25% of GDP. The US doesn’t provide universal health care like in pretty much every other OECD country. Based on data gathered from the <a href="https://data.oecd.org/inequality/poverty-rate.htm">OECD</a> and <a href="https://www.weforum.org/agenda/2021/02/social-spending-highest-lowest-country-comparison-oecd-france-economics-politics-welfare/">World Economic Forum</a>, social spending is correlated with lower poverty rates.</p> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/2023-09-10/social-spending-vs-poverty-rate-480.webp"/> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/2023-09-10/social-spending-vs-poverty-rate-800.webp"/> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/2023-09-10/social-spending-vs-poverty-rate-1400.webp"/> <img src="/assets/img/2023-09-10/social-spending-vs-poverty-rate.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p>Economic growth has made the elimination of poverty possible or near possible. This elimination requires a progressive tax system and comprehensive social safety net which many developed countries lack. The solution to the economic problem is within our grasp.</p> <h3 id="prediction-3">Prediction 3</h3> <p>Working hours and economic growth are not correlated. Higher productivity only makes lower working hours possible, by reducing the minimum number of working hours needs to produce at subsistence level, not inevitable. Previous economic transformations have caused working hours to increase, not decrease.</p> <p>Working hours in the factories of the early Industrial Revolution were much higher than on farms. It was not uncommon for factory workers to participate in 80-100 hour work weeks spread across &gt;5 days. <a href="https://groups.csail.mit.edu/mac/users/rauch/worktime/hours_workweek.html">In medieval Europe, peasants worked only during the growing season in the Spring, Summer, and Fall but intensely: 120 12 hour days a year for a probable total of 1,440 hours annually</a>. Farm and factory work are very different but <a href="https://groups.csail.mit.edu/mac/users/rauch/worktime/hours_workweek.html">artisans, which factories replaced, only worked 8-9 hours per day for &lt;2/3 of the year</a>. Thus, the 40 hour workweek is merely a return to the labor norms of the medieval era. However, <a href="https://www.nature.com/articles/s41562-019-0610-x">the Agricultural Revolution, the greatest economic advance before the Industrial Revolution, itself caused working hours to increase from hunter-gatherer societies</a>. Thus, despite the scientific and technological advances of the past 12,000 years, the average person in modern society has less leisure time than their Stone Age ancestors<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup>.</p> <p>Since the 19th century, reductions in working hours have come through political not economic forces. The 40 hour workweek is a product of legislation. <a href="https://www.cultureamp.com/blog/40-hour-work-week">In the US, groups mobilized in support of a 40 hour workweek in the 1860s but it became law in 1940</a>. The story is the same across the world. Then, why did the labor movement stop at 40 hours? Why hasn’t a sub-40 hour workweek been widely adopted?</p> <p>I don’t have the answer but I suspect part of the reason is that the 955 schedule, 9 am to 5 pm 5 days per week, has been good enough. While 12 hour workdays are genuinely oppressive, 8 hour workdays are bearable. <a href="https://www.washingtonpost.com/technology/2023/05/24/4-day-work-week-united-states/">As a result, it is only post COVID that the 4 day workweek idea has taken off</a>. <a href="https://www.pewresearch.org/social-trends/2022/02/16/covid-19-pandemic-continues-to-reshape-work-in-america/">COVID changed Americans’ attitudes towards work</a>, prerequisites to the societal adoption of a 4 day workweek.</p> <h3 id="prediction-4">Prediction 4</h3> <p>Given that Predictions 2 and 3 have not come true, Keynes’ cultural prediction could not come to pass. The cultural evolution that Keynes’ imagines comes after economic bliss. Until societies solve the economic problem for the supermajority of the population and free up vast reserves of leisure time, we will need to tolerate the vices of greed and usury.</p> <blockquote> <p>But beware! The time for all this is not yet. For at least another hundred years we must pretend to ourselves and to every one that fair is foul and foul is fair; for foul is useful and fair is not. Avarice and usury and precaution must be our gods for a little longer still. For only they can lead us out of the tunnel of economic necessity into daylight.</p> </blockquote> <p>In the US, since ~1980<sup id="fnref:3" role="doc-noteref"><a href="#fn:3" class="footnote" rel="footnote">3</a></sup> there has been a disturbing trend towards greater works. The centrality of work in people’s lives rose in the late 20th century as social capital and organized religion declined. The decline left a void that work stepped in to fill. <a href="https://www.pewresearch.org/short-reads/2020/02/14/more-than-half-of-americans-say-marriage-is-important-but-not-essential-to-leading-a-fulfilling-life/">Americans view work as more essential to a fulfilling life than romantic relationships or having children</a>. <a href="https://www.pewresearch.org/social-trends/2023/01/24/parenting-in-america-today/?te=1&amp;nl=ross-douthat&amp;emc=edit_rd_20230130">American parents want these same things for their children</a>. Richer Americans work more than poorer Americans.</p> <p>This is irrational. <a href="https://community.thriveglobal.com/relationships-happiness-well-being-life-lessons/">Research in the social sciences indicates that relationships are the most important factor in life satisfaction</a>. Although there doesn’t appear to be any primacy placed on romantic relationships over friendships or familial bonds, Americans aren’t valuing those either.</p> <p>In Europe, things are closer to Keynes’ predictions. In general, Europeans work less than Americans due to possessing more vacation time and using it. Often this difference is attributed to culture. Europeans work to life; Americans live to work. Economists disagree<sup id="fnref:4" role="doc-noteref"><a href="#fn:4" class="footnote" rel="footnote">4</a></sup>, looking towards <a href="https://www.minneapolisfed.org/article/2003/european-vacation-why-americans-work-more-than-europeans">taxes</a>, <a href="https://scholar.harvard.edu/files/alesina/files/work_and_leisure_in_the_u.s._and_europe.pdf">labor policy</a>, or <a href="https://www.dallasfed.org/research/economics/2023/0119">other explanations</a> for the working hour gap. Of course, politics is downstream of culture. Culture plays a role in what policies are implemented.</p> <p>However the difference started, decades of reduced working hours has ingrained work-life balance in the European worldview. <a href="https://getyournewview.com/vacation-guilt-america-vs-europe-pto/">Europeans feel less guilty than Americans when taking vacations</a>. In the same survey, Europeans take more vacations days than Americans when they have unlimited PTO. While Americans and Europeans work off hours at equal rates, <a href="https://fortune.com/2017/01/01/french-right-to-disconnect-law/">European countries are passing laws banning work email after hours</a> in an attempt to maintain a right to disconnect. Nothing of this sort is happening in the US.</p> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="https://getyournewview.com/wp-content/uploads/2022/05/New-View-Strategies-Vacation-Guilt_Graphic-4-480.webp"/> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="https://getyournewview.com/wp-content/uploads/2022/05/New-View-Strategies-Vacation-Guilt_Graphic-4-800.webp"/> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="https://getyournewview.com/wp-content/uploads/2022/05/New-View-Strategies-Vacation-Guilt_Graphic-4-1400.webp"/> <img src="https://getyournewview.com/wp-content/uploads/2022/05/New-View-Strategies-Vacation-Guilt_Graphic-4.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <h2 id="the-importance-of-politics">The Importance of Politics</h2> <p>Keynes overestimated the importance that GDP growth would have in reaching economic bliss and underestimated the importance of the soft factors: politics, culture, union strength, etc. I believe that for these reasons, Keynes never expressed complete certainty in his predictions. After all, the title of the essay is “Economic Possibilities for Our Grandchildren”, not “Economic Certainties for Our Grandchildren”.</p> <p>Increases to worker productivity have made the end of poverty and sub 40 hour workweek possible. It is by our hands, not nature’s, that we have failed to achieve these goals. Some examples:</p> <ul> <li>The nearly 1 trillion dollar US defense budget comes at the cost of greater social spending. <a href="https://prospect.org/power/much-money-take-eliminate-poverty-america/">A fraction of that could eliminate poverty in the US</a>.</li> <li>The US lacks mandated minimum vacation time legislation.</li> <li><a href="https://www.washingtonpost.com/technology/2023/05/24/4-day-work-week-united-states/">Companies resist the extensive changes needed to make 4 day workweeks possible</a>.</li> <li><a href="https://eh.net/encyclopedia/hours-of-work-in-u-s-history/">Labor leaders tried reviving the push for fewer working hours post WW2 but found most didn’t workers didn’t want a shorter work week</a>.</li> </ul> <p>Keynes thought that Predictions 2 and 3 would lead to Prediction 4. In fact, Prediction 4 must take place before Predictions 2 and 3. Only by changing people’s attitudes towards work and life and inequality can economic bliss be made available for everyone.</p> <hr/> <div class="footnotes" role="doc-endnotes"> <ol> <li id="fn:1" role="doc-endnote"> <p>See Bowling Alone: The Collapse and Revival of American Community. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> <li id="fn:2" role="doc-endnote"> <p>Agriculture also reduced the quality of life for most people. Hunter-gatherers were taller than their farming cousins. <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> <li id="fn:3" role="doc-endnote"> <p>This year shows up a lot in the economic history of the US as it represents the shift from the New Deal to the neoliberal era. <a href="#fnref:3" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> <li id="fn:4" role="doc-endnote"> <p>Naturally, economists will seek economic answers to questions. <a href="#fnref:4" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> </ol> </div>]]></content><author><name></name></author><category term="economics"/><summary type="html"><![CDATA[What Keynes got right and wrong in his famous essay.]]></summary></entry><entry><title type="html">Solution to Why π is in the normal distribution (beyond integral tricks)</title><link href="https://georgerpu.github.io/blog/2023/solutions-to-why-pi/" rel="alternate" type="text/html" title="Solution to Why π is in the normal distribution (beyond integral tricks)"/><published>2023-04-02T00:00:00+00:00</published><updated>2023-04-02T00:00:00+00:00</updated><id>https://georgerpu.github.io/blog/2023/solutions-to-why-pi</id><content type="html" xml:base="https://georgerpu.github.io/blog/2023/solutions-to-why-pi/"><![CDATA[\[\newcommand{\D}[1]{\mathop{d#1}}\] <p>In 3Blue1Brown’s latest video <a href="https://www.youtube.com/watch?v=cy8r7WSuT1I">Why π is in the normal distribution (beyond integral tricks) </a>, you can find an exercise at the <a href="https://youtu.be/cy8r7WSuT1I?t=1500">end</a> that computes the $n-1$ volume of the boundary of an $n$-dimensional ball using the integral of a Guassian function. These is the solution.</p> <h2 id="part-1">Part 1</h2> \[\begin{align*} I_n &amp;= \int_{-\infty}^{\infty} \cdots \int_{-\infty}^{\infty} e^{-(x_1^2 + \dots + x_n^2)} \D{x_1} \cdots \D{x_n} \\ &amp;= \int_{-\infty}^{\infty} \cdots \int_{-\infty}^{\infty} e^{-x_1^2} \cdots e^{-x_n^2} \D{x_1} \cdots \D{x_n} \\ &amp;= \int_{-\infty}^{\infty} e^{-x_n^2} \cdots \int_{-\infty}^{\infty} e^{-x_1^2} \D{x_1} \cdots \D{x_n} \\ &amp;= \underbrace{\sqrt{\pi} \cdots \sqrt{\pi}}_{n \text{ times}} \\ &amp;= \pi^{n/2} \end{align*}\] <h2 id="part-2">Part 2</h2> <p>The integral $I_n$ calculates the total volume of the $n$-dimensional un-normalized Gaussian in $\mathbb{R}^n$ by integrating $e^{-(x_1^2 + \dots + x_n^2)}$ along each dimension from $-\infty$ to $\infty$.</p> <p>Another way to calculate the volume of the Gaussian is using hyperspherical coordinates. There is 1 radial coordinate $r \geq 0$, $n-2$ angular coordinates $\phi_1, \dots, \phi_{n-2} \in [0, \pi)$, and another angular coordinate $\theta \in [0, 2\pi)$. As a function of these parameters, the Gaussian only depends on $r$</p> \[f(r) = e^{-r^2}\] <p>Recall that in polar coordinates $\D{A} = r \D{\theta} \D{r}$. Similarly, $\D{V} = r^{n-1} \D{\phi_1} \cdots \D{\phi_n} \D{\theta} \D{r}$. Let</p> \[C_n = \int_{0}^{2\pi} \int_{0}^{\pi} \cdots \int_{0}^{\pi} 1 \D{\phi_1} \cdots \D{\phi_n} \D{\theta}.\] <p>Then</p> \[\begin{align*} I_n &amp;= \int_{0}^{r} \int_{0}^{2\pi} \int_{0}^{\pi} \cdots \int_{0}^{\pi} e^{-r^2} r^{n-1} \D{\phi_1} \cdots \D{\phi_n} \D{\theta} \D{r} \\ &amp;= \int_{0}^{r} C_n r^{n-1} e^{-r^2} \D{r}. \end{align*}\] <h2 id="part-3">Part 3</h2> <p>Let $u = r^{n-2}$ and $\D{v} = re^{-r^2} \D{r}$. Then $\D{u} = (n - 2)r^{n-3} \D{r}$ and $v = -\frac{1}{2} e^{-r^2}$.</p> \[\begin{align*} I_n &amp;= \int_{0}^{\infty} C_n r^{n-1} e^{-r^2} \D{r} \\ &amp;= C_n \int_{0}^{\infty} u \D{v} \\ &amp;= C_n \left( uv - \int_{0}^{\infty} v \D{u} \right) \\ &amp;= C_n \left( \left[ r^{n-2} \cdot -\frac{1}{2}e^{-r^2} \right]_{0}^{\infty} - \int_{0}^{\infty} -\frac{1}{2}e^{-r^2} (n - 2)r^{n-3} \D{r} \right) \\ \end{align*}\] <p>We first compute $\left[ r^{n-2} \cdot -\frac{1}{2}e^{-r^2} \right]_{0}^{\infty}$. Clearly, it is 0 when $r = 0$. When $r \to \infty$,</p> \[r^{n-2} \cdot -\frac{1}{2}e^{-r^2} = -\frac{r^{n-2}}{2e^{r^2}} = -\frac{\infty}{\infty}\] <p>Using L’Hôpital’s rule, we get</p> \[-\frac{(n-2)r^{n-3}}{4re^{r^2}} = -\frac{\infty}{\infty}\] <p>which is still indeterminate. However, we see that, after $n-3$ more differentiations of the numerator and denominator, the numerator will eventually resolve to a constant while the denominator is $cp(r)e^{r^2}$ for some constant $c$ and $p(r)$ power of $r$.</p> \[\lim\limits_{r \to \infty} r^{n-2} \cdot -\frac{1}{2}e^{-r^2} = 0\] <p>With the $[uv]_{0}^{\infty}$ term eliminated,</p> \[\begin{align*} I_n &amp;= C_n \left( - \int_{0}^{\infty} -\frac{1}{2}e^{-r^2} (n - 2)r^{n-3} \D{r} \right) \\ &amp;= \frac{n - 2}{2} C_n \int_{0}^{\infty} r^{n-3}e^{-r^2} \D{r} \\ &amp;= \frac{n - 2}{2} C_n \frac{I_{n-2}}{C_{n-2}} \end{align*}\] <p>since $I_{n-2}$ includes the $C_{n-2}$ term in the integral.</p> <h2 id="part-4">Part 4</h2> <p>From Part 1, we know that $I_n = \pi^{n/2}$.</p> \[\begin{align*} I_n &amp;= \frac{n - 2}{2} C_n \frac{I_{n-2}}{C_{n-2}} \\ \pi^{n/2} &amp;= \frac{n - 2}{2} C_n \frac{\pi^{(n-2)/2}}{C_{n-2}} \\ C_{n-2} \frac{2}{n-2} \frac{\pi^{n/2}}{\pi^{(n-2)/2}} &amp;= C_n \\ C_{n-2} \frac{2\pi}{n - 2} &amp;= C_n \\ C_n &amp;= \frac{2\pi}{n - 2} C_{n-2} \end{align*}\] <p>Using the recurrence relation, we can compute $C_n$ for any $n$.</p> \[\begin{align*} C_2 &amp;= 2\pi \\ C_3 &amp;= 4\pi \\ C_4 &amp;= \frac{2\pi}{4 - 2} C_2 = 2\pi^2 \\ C_5 &amp;= \frac{2\pi}{5-2}C_3 = \frac{8}{3}\pi^2 \\ C_6 &amp;= \frac{2\pi}{6 - 2}C_4 = \pi^3 \\ C_7 &amp;= \frac{2\pi}{7 - 2}C_5 = \frac{16}{15} \pi^3 \end{align*}\] <p>For</p> \[S(n) = n\frac{\pi^{n/2}}{(n/2)!} r^{n-1}\] <p>to be the volume of the boundary of a $n$-dimensional ball, $S(n)$ must satisfy 2 conditions.</p> <ol> <li>$n\frac{\pi^{n/2}}{(n/2)!}$ must satisfy the recurrence relation above for $C_n$.</li> </ol> \[\begin{align*} n\frac{\pi^{n/2}}{(n/2)!} &amp;\stackrel{?}{=} \frac{2\pi}{n - 2} (n - 2)\frac{\pi^{(n-2)/2}}{((n-2)/2)!} \\ &amp;\stackrel{?}{=} 2\frac{\pi^{n/2}}{((n-2)/2)!} \\ n/2 \frac{\pi^{n/2}}{(n/2)!} &amp;\stackrel{?}{=} \frac{\pi^{n/2}}{((n-2)/2)!} \\ \frac{\pi^{n/2}}{((n - 2)/2)!} &amp;\stackrel{\checkmark}{=} \frac{\pi^{n/2}}{((n-2)/2)!} \end{align*}\] <ol> <li>$S(2) = 2\pi r$ and $S(3) = 4\pi r^2$.</li> </ol> \[\begin{align*} S(2) &amp;= 2 \frac{\pi^{2/2}}{(2/2)!} r^{2-1} \\ &amp;= 2\pi r \\ S(3) &amp;= 3 \frac{\pi^{3/2}}{(3/2)!} r^{3-1} \\ &amp;= 3 \frac{\pi^{3/2}}{(3/2)!} r^2 \\ &amp;= 3 \frac{\pi^{3/2}}{(3/2)(1/2)(-1/2)!} r^2 \\ &amp;= 3 \frac{\pi^{3/2}}{(3/2)(1/2)\sqrt{\pi}} r^2 \\ &amp;= 4\pi r^2 \end{align*}\]]]></content><author><name></name></author><category term="mathematics"/><summary type="html"><![CDATA[The (n-1)-volume of the boundary of a n-dimensional ball]]></summary></entry><entry><title type="html">2022 in Books</title><link href="https://georgerpu.github.io/blog/2022/books/" rel="alternate" type="text/html" title="2022 in Books"/><published>2022-12-31T00:00:00+00:00</published><updated>2022-12-31T00:00:00+00:00</updated><id>https://georgerpu.github.io/blog/2022/books</id><content type="html" xml:base="https://georgerpu.github.io/blog/2022/books/"><![CDATA[<h2 id="business">Business</h2> <h3 id="extreme-ownership---jocko-willink-and-leif-babin">Extreme Ownership - Jocko Willink and Leif Babin</h3> <p>Initially this book was not on my reading list, but my manager encouraged me to read it so I moved it to the top of the queue<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>. The book covers the experiences of 2 Navy SEALs, the authors of the book, in the Iraq War and in their later life as leadership consultants. Each chapter begins with a combat story that transitions into a single principle. Then the authors apply that principle in an anecdote from their consulting work. The format and laconic style are effective at transmitting their message, even if sometimes the stories may not match the principle. For example, the last chapter “Discipline Equals Freedom” begins with a story about how a new search procedure replaced their old ransack method but ends with a story about a CEO who needed to fire his friend.</p> <p>Much of the book can be reduced to “find a way”. Take ownership of your failures; use your agency to affect your surroundings. This is great advice for individuals but not for organizations or countries. Despite the successes Jocko Willink and Leif Babin and the rest of Task Force Bruiser fought and bled for during the Battle of Ramadi, the Iraq War was a failure. The decision to overthrow a dictatorial regime and establish a new democracy created a insurgency, the rise of ISIS, and a stronger Iran. Perhaps if the Bush administration practices better leadership, all this could have been avoided. For the soldiers on the ground like Jocko Willink and Leif Babin, extreme ownership could win the Battle of Ramadi but not the Iraq War.</p> <h2 id="history">History</h2> <h3 id="crashed---adam-tooze">Crashed - Adam Tooze</h3> <p><em>Crashed</em> is a thick book that covers the Great Recession and its aftermath. In particular, the book connects the 2008 recession and Eurozone crisis, blaming it on Europe’s lackluster response to the 2008 recession. The radical intervention by the United States and China to save their economies were not made by Europe in 2008, whose banking sector and overall economy were weaker in the early 2010s. At the same time, any stimulus taken was beyond the capacity of smaller European states. Financial crisis became fiscal crisis for European countries. This connection was seldom made in the news coverage of Eurozone crisis, which blamed Southern European excess for their predicament.</p> <p>The Great Recession is the probably most significant of my lifetime. For one, it was the worst economic recession in 80 years. Millions of Americans were impoverished. It’s cause by careless technocratic elites and unequal resolution by the same technocracy generated a swell of populist anger. This anger was channeled into populist political campaigns on both sides of the Atlantic. Across the Atlantic, the moderate Left and Right have lost ground to their ideological flanks. These populists have all had authoritarian tendencies; democracy was damaged.</p> <p>The 2010s in some ways were like a new 1930s, but unlike <em>Wages of Destruction</em> (which I read first), Tooze is writing history as it is happening. The book is published in 2018, covering events up to 2017. From the post-COVID perspective–another once in a lifetime crisis–we can judge Tooze’s commentary on 2008.</p> <ul> <li>Tooze is right in noting that the 2009 stimulus in the United States was not enough. Unemployment in the United States peaked at 10%, taking 7 years to reach pre-crisis levels. Learning from this, Congress passed trillions of stimulus which went directly to households in 2020.</li> <li>Tooze is right in calling Dodd-Frank a mess. The implicit too-big-to-fail guarantee incestuously ties the government and Wall Street together. Systematically important financial institutions have turned into arms of the state, albeit operated for private profit.</li> <li>Tooze justly notes that inflicting austerity on the Greece only caused suffering. Even today Greece has a 15% unemployment rate and a debt to GDP ratio of 176%.</li> <li>Tooze correctly ties the collapse in centrist politics across the Atlantic back to the 2008 recession. The inequality of the crisis-fighting measures reactivated the Left. The power wielded by unelected elites reactivated the far Right<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup>.</li> <li>Tooze misses the new Cold War emerging between China and the United States. Obama began an anti-China stance with the TPP and freedom of navigation in the South China Sea. Trump dug into the toolbox of tariffs to escalate the war. Biden has continued and substantiated Trump’s anti-China industrial policies.</li> </ul> <h3 id="wages-of-destruction---adam-tooze">Wages of Destruction - Adam Tooze</h3> <p><em>Wages of Destruction</em> is an incredibly dense and long book about the German economy from 1919-1945. The book attempts to provide a strategic, ideological, and economic synthesis as an answer to many big questions about Nazi Germany.</p> <ul> <li>What were Hitler’s geopolitical ambitions?</li> <li>Did Hitler help Germany exit the Great Depression?</li> <li>Why did Hitler go to war in 1939 with Western Europe?</li> <li>Why was Germany so successful in 1940-1941?</li> <li>How was Germany able to surivive another 3.5 years after the failure of December 1941?</li> <li>Why dedicate valuable resources to genocide?</li> <li>How effective was Anglo-American bombing of German industry and cities?</li> </ul> <p>The answers for these questions deviates from the previous historical orthodoxy. Hitler’s desire to create a Germany capable of competing with the United States (and the UK to a lesser extent), improvisation in the face of material and labor constraints, and racial hierarchy drive much of <em>Wages of Destruction</em>. This desire to compete with the North Atlantic leads Hitler to the conclusion that he must conquer and genocide Eastern Europe to gain the land and labor. Along with careful management of the national economy, the Nazi state applies these tools before and during World War II to start and perpetuate the worst conflict in human history.</p> <p>I am uncertain as to whether Tooze is right. Tooze’s rationalization of much of Germany’s genocidal drive and action as a reaction to the American century was certainly shocking to me. What is more certain is that the book is a hard read even for those familiar with the general course of the Second World War. There are many names of people, companies, and government agencies which, unless you too are an economic historian of 20th century Europe, will be new. Having never taken a macroeconomics course in high school or college, I had to look up terms like <strong>rationalization</strong> or <strong>balance of payments</strong>. The trouble was definitely worth it to see such a pivotal clash from a new perspective.</p> <h2 id="programming">Programming</h2> <h3 id="clean-code---robert-martin">Clean Code - Robert Martin</h3> <p><em>Clean Code</em> is the pre-eminant book on programming, ranked first in many lists of the books every programmer should read. It is the <a href="https://www.amazon.com/gp/bestsellers/books/491316/ref=zg_b_bs_491316_1">number one best seller on Amazon in the Software Design &amp; Engineering</a> category yet has also received anti-recommendations in recent years by <a href="https://qntm.org/clean">bloggers</a> and other <a href="https://web.stanford.edu/~ouster/cgi-bin/aposd2ndEdExtract.pdf">authors</a>. Given my current job as a software developer, I decided to read <em>Clean Code</em> to make my own opinion. I review each chapter individually.</p> <p>Certain chapters are written with/by other authors.</p> <h4 id="1-clean-code">1. Clean Code</h4> <p>The first chapter begins by emphasizing the importance of clean code for the small number of readers who dismiss its value. The remainder of the chapter tries to define what “clean code” means: readability, simplicity, and loftier ideals like elegance.</p> <h4 id="2-meaningful-names---tim-ottinger">2. Meaningful Names - Tim Ottinger</h4> <p>The second chapter can be summarized “don’t make your names too long” and “don’t make your names too short”. Typing is easy; don’t be lazy and drop important context. Knowing what can be left out from variable names is harder. Err on the side of longer names as unnecessary information can always be ignored by the reader.</p> <h4 id="3-functions">3. Functions</h4> <p>The most opinionated rule in the whole book is</p> <blockquote> <p>The first rule of functions should be small. The second rule is that <em>they should be smaller than that</em> [emphasis in original].</p> </blockquote> <p>This makes no sense to me. Isn’t extracting every few lines of code to a function is equivalent to commenting every few lines? Martin calls comments a necessary evil. Why should writing a psuedo-comment in a function name be considered a success? In my short career, I have read long classes filled with similarly named but slightly different methods like <code class="language-plaintext highlighter-rouge">render</code> in Listing 3-7. It is not a fun experience.</p> <p>I agree that functions need a maximum size. Functions should not be longer than a screen. But, functions, at least those rarely called, need a minimum size limit too. Functions should do only one thing, but that thing needs to be significant. Functions incur a cost. They disrupt the linear flow of the code, increase the interface surface area, and introduce coupling between modules. Their benefit needs to be greater than the code.</p> <p>Otherwise, the advice in the chapter is good. The number of function arguments should be minimized. A large number of arguments makes writing unit tests annoying. Avoiding code duplication is important, but don’t over do it. <a href="https://sandimetz.com/blog/2016/1/20/the-wrong-abstraction">Deduplication is not worth the wrong abstraction</a>. The preference for exceptions instead of error codes is ironic as some modern languages like <a href="https://doc.rust-lang.org/book/ch09-00-error-handling.html">Rust</a> and <a href="https://go.dev/blog/error-handling-and-go">Go</a> do not have exceptions.</p> <h4 id="4-comments">4. Comments</h4> <p>Martin hates comments.</p> <blockquote> <p>Comments are always failures</p> </blockquote> <p>(which negatively influences his philosophy around functions and classes). I mostly agree, mainly since old comments tend to linger in the code base, even if more for sociological reasons than practical ones. Good comments are valuable though. I hope Martin’s statements doesn’t deter readers from attempting to write good comments.</p> <p>Martin’s classification of good and bad comments looks good to me. His advice against HTML comments is out of date as IDES/editors render stylistic markings now when hovering over the documented entity.</p> <h4 id="5-formatting">5. Formatting</h4> <p>This is the first chapter I whole heartedly agree with. It formalizes all the rules I intuited over the years from writing large programs. The penultimate section of the book hits a gold nugget. Configure IDE/editor tools to enforce formatting standards for you, and you will never have to think about formatting again.</p> <h4 id="6-objects-and-data-structures">6. Objects and Data Structures</h4> <p>Martin draws a distinction between objects which only expose their methods and data structures, better called structs, which expose their fields.</p> <ol> <li>Adding a new <code class="language-plaintext highlighter-rouge">area</code> function for <code class="language-plaintext highlighter-rouge">Circle</code>, <code class="language-plaintext highlighter-rouge">Rectangle</code>, and <code class="language-plaintext highlighter-rouge">Square</code> structs requires creating only 1 function, albeit with 3 different area formulas. Adding a new <code class="language-plaintext highlighter-rouge">area</code> method to <code class="language-plaintext highlighter-rouge">Circle</code>, <code class="language-plaintext highlighter-rouge">Rectangle</code>, and <code class="language-plaintext highlighter-rouge">Square</code> objects means modifying 3 classes.</li> <li>Adding a new <code class="language-plaintext highlighter-rouge">Triangle</code> struct forces us to modify all our geometric functions: <code class="language-plaintext highlighter-rouge">area</code>, <code class="language-plaintext highlighter-rouge">perimeter</code>, etc. Adding a new <code class="language-plaintext highlighter-rouge">Triangle</code> object doesn’t require changes to another other objects.</li> </ol> <p>Essentially, Martin argues that object oriented and procedural code are complimentary. It’s an interesting idea, although it feels like the only difference is how the functions are grouped. Underneath, we still need $n_{functions} \cdot n_{shapes}$ formulas.</p> <h4 id="7-error-handling---michael-feathers">7. Error Handling - Michael Feathers</h4> <p>Overall, this chapter covers the basics of clean error handling in Java. The “Don’t Pass Null” section hits on a core idea from <a href="https://georgerpu.github.io/blog/2019/books/"><em>A Philosophy of Software Design</em></a>–defining errors away. Adjusting code so that it never returns an error is the cleanest error handling.</p> <p>As for passing <code class="language-plaintext highlighter-rouge">null</code>s, the solution is better language design. Languages post 2008 often disallow ordinary objects from being <code class="language-plaintext highlighter-rouge">null</code>. Only nullable types can be <code class="language-plaintext highlighter-rouge">null</code>. The compiler can check whether nullable types are being assigned to non-nullable types and throw a compile time exception when there is a risk of a <code class="language-plaintext highlighter-rouge">NullPointerException</code>.</p> <h4 id="8-boundaries---james-grenning">8. Boundaries - James Grenning</h4> <p>This chapter advocates wrapping external dependencies in a module <code class="language-plaintext highlighter-rouge">m</code>. Application code only uses <code class="language-plaintext highlighter-rouge">m</code>, pushing all boundary code interacting with third party packages into <code class="language-plaintext highlighter-rouge">m</code>. Especially if the application code uses the external package in a few specific ways, I highly recommend doing this. Using adapters and wrappers this way is something I started unconsciously, so it’s nice to surface this principle to the level of conscious thought.</p> <h4 id="9-unit-tests">9. Unit Tests</h4> <p>Martin advocates for test driven development (TDD) where tests are written first. Only after a test is written, the developer is allowed to write production code to make the test pass<sup id="fnref:3" role="doc-noteref"><a href="#fn:3" class="footnote" rel="footnote">3</a></sup>. Given that TDD is not widely practiced and that its efficacy at building better software is contested by <a href="https://neverworkintheory.org/2012/01/25/realizing-quality-improvement-through-test-driven-development.html">empirical</a> <a href="https://neverworkintheory.org/2016/10/05/test-driven-development.html">academic</a> <a href="https://neverworkintheory.org/2021/09/16/analyzing-the-effects-of-tdd-in-github.html">research</a>, TDD material probably should have been cut to keep the chapter relevant to as broad of an audience as possible.</p> <p>The chapter also gives the strange advice to invent a domain specific language just for testing. Personally, I prefer Listing 9-3–which the author calls bad–to Listing 9-4. The name <code class="language-plaintext highlighter-rouge">wayTooCold</code> is not a verb phrase; I find it hard to interpret the 5 character string representation of <code class="language-plaintext highlighter-rouge">hw</code>’s state.</p> <p>Otherwise, the advice in the chapter is good. Test suites are important to working software. Unit tests should follow the setup, operate, check structure. Tests can have multiple asserts but only a single concept. All tests should follow the FIRST principles. I wish the book had covered mocking which is essential to unit testing classes in Java.</p> <h4 id="10-classes---jeff-langr">10. Classes - Jeff Langr</h4> <p>This chapter offers good advice for breaking up large classes. I agree more with the small classes advice than the small functions advice. Classes become large by having more methods which increases interface costs without providing much more functionality. In fact, having fewer but deeper methods helps keep classes smaller by reducing the number of methods. Each class should have a single responsibility it does well.</p> <h4 id="11-systems---kevin-wampler">11. Systems - Kevin Wampler</h4> <p>This chapter emphasizes the role of dependency injection (DI) and aspect oriented programming (AOP) for clean systems.</p> <ol> <li>DI is important whenever writing large applications. It allows classes to use dependency objects in fields without worrying about their origins. For Java, I recommend <a href="https://dagger.dev">Dagger</a> over <a href="https://www.baeldung.com/spring-dependency-injection">Spring</a> or <a href="https://github.com/google/guice">Guice</a><sup id="fnref:4" role="doc-noteref"><a href="#fn:4" class="footnote" rel="footnote">4</a></sup>.</li> <li>Often the same code needs to be run in many places. An example is timing every method $f$ and publishing the results to a dashboard. AOP lets us wrap $f$ with our timing code rather than put it into $f$. Every call to $f$ first goes to a timing proxy that starts the timer, internally calls $f$, then publishes $f$’s execution time. The explanation of AOP is really good. This is the first time I felt like I grasped the concept.</li> </ol> <p>DI and AOP are useful tools to construct clean systems but are not panaceas to the problem of clean coding.</p> <h4 id="12-emergence---jeff-langr">12. Emergence - Jeff Langr</h4> <p>This is a weird chapter. It mentions 4 rules of simple design, then tries to show how applying those rules creates a design out of thin air. It advocates no duplication when <a href="https://overreacted.io/goodbye-clean-code/">a little duplication is ok</a>. The section “Minimal Classes and Methods” even acknowledges this.</p> <h4 id="13-concurrency---brett-schuchert">13. Concurrency - Brett Schuchert</h4> <p>This chapter provides recommendations clean concurrent programming. I don’t have much experience writing multithreaded code, but I really like this chapter. Java is way past version 5 now, so some of the advice may be out of date.</p> <h4 id="14-successive-refinement">14. Successive Refinement</h4> <p>In this chapter, Martin works through an example refactoring of a rough draft of an <code class="language-plaintext highlighter-rouge">Args</code> class to a clean version. The <code class="language-plaintext highlighter-rouge">Args</code> class parses command line arguments according to a one line <code class="language-plaintext highlighter-rouge">String</code> schema. The final implementation is mostly ok, but has a few problems.</p> <ul> <li>Deciding which marshaler to add based on the schema type symbols should be split into its own method outside of the <code class="language-plaintext highlighter-rouge">Args</code> class.</li> <li>Why make <code class="language-plaintext highlighter-rouge">getValue</code> a static method in <code class="language-plaintext highlighter-rouge">ArgumentMarshaler</code>? If the data is stored in a field, why not make <code class="language-plaintext highlighter-rouge">getValue</code> a regular method.</li> <li><code class="language-plaintext highlighter-rouge">ArgumentMarshaler</code>’s <code class="language-plaintext highlighter-rouge">set</code> method should take a <code class="language-plaintext highlighter-rouge">String</code> instead of an <code class="language-plaintext highlighter-rouge">Iterator&lt;String&gt;</code>. <code class="language-plaintext highlighter-rouge">ArgumentMarshaler</code> doesn’t need to know that the arguments are being iterated over, just the current argument. This issue can be partially fixed by using a for-each loop</li> <li><code class="language-plaintext highlighter-rouge">currentArgument</code> shouldn’t be a field.</li> </ul> <p>I find code in paper books hard to read. The refactoring of <code class="language-plaintext highlighter-rouge">Args</code> would be better as a companion video than a chapter.</p> <h4 id="15-junit-internals">15. JUnit Internals</h4> <p>Martin refactors the class <code class="language-plaintext highlighter-rouge">ComparisonCompactor</code> from the JUnit library which creates an error message showing the difference between 2 <code class="language-plaintext highlighter-rouge">String</code>s. I like the final version more than the final implementation of <code class="language-plaintext highlighter-rouge">Args</code>. My only complaint is that Martin has a disturbing tendency to use fields like global state. One method will set a field for another method to read it. In this example it is not so bad. Each field isx written in only 1 method while being read by many others. But this tendency flares up in other listings throughout the book.</p> <h4 id="16-refactoring-serialdate">16. Refactoring <code class="language-plaintext highlighter-rouge">SerialDate</code></h4> <p>Another chapter refactoring code. <code class="language-plaintext highlighter-rouge">SerialDate</code> is a class deep inside the no longer developed <a href="https://www.jfree.org/jcommon/">JCommon</a> library. Martin heavily criticizes this <code class="language-plaintext highlighter-rouge">SerialDate</code> class<sup id="fnref:5" role="doc-noteref"><a href="#fn:5" class="footnote" rel="footnote">5</a></sup>. This is the most realistic refactoring as Martin tries to fix a poor module than improve an already good one. It is rare to refactor good modules to become great. The chapter doesn’t print the original or final version of <code class="language-plaintext highlighter-rouge">SerialDate</code> so Martin’s steps are difficult to follow.</p> <h4 id="17-smells-and-heuristics">17. Smells and Heuristics</h4> <p>This is the best chapter in the book. It summarizes the content of all the previous chapters in $5 + 4 + 36 + 3 + 7 + 9 = 64$ principles. Some principles like <em>G4: Overridden Safeties</em> are mentioned in the rest of the book. After reading the entire book (minus the Appendix), I would recommend newbie programmers just read Chapter 17. Overall, the book isn’t as bad as the naysayers claim, but there is questionable information. After reading Chapter 17, I would then recommend newbies read <em>A Philosophy of Software Design</em>.</p> <hr/> <div class="footnotes" role="doc-endnotes"> <ol> <li id="fn:1" role="doc-endnote"> <p>What this might imply is left as an exercise to the reader. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> <li id="fn:2" role="doc-endnote"> <p>I find the connection between the ruin of the 2008 recession and the rise of Trump less believable given that Trump voters were better off than the average voter. <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> <li id="fn:3" role="doc-endnote"> <p>The developer can refactor code while keeping the tests passing. <a href="#fnref:3" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> <li id="fn:4" role="doc-endnote"> <p>Both Guice and Dagger v2 are developed by Google. Dagger v1 was developed by Square, the company that sells those point of sale tablets. According to a <a href="https://www.reddit.com/r/java/comments/1y9e6t/comment/cfjc242/?utm_source=share&amp;utm_medium=web3x&amp;utm_name=web3xcss&amp;utm_term=1&amp;utm_content=share_button">Reddit AMA</a>, Google plans to replace Guice with Dagger but, as of 2022, both are actively developed. <a href="#fnref:4" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> <li id="fn:5" role="doc-endnote"> <p>His first move is to rename it to <code class="language-plaintext highlighter-rouge">DayDate.</code> <a href="#fnref:5" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> </ol> </div>]]></content><author><name></name></author><category term="books"/><summary type="html"><![CDATA[All the books I read in 2022]]></summary></entry><entry><title type="html">The 2022-2023 NBA MVP</title><link href="https://georgerpu.github.io/blog/2022/nba-mvp/" rel="alternate" type="text/html" title="The 2022-2023 NBA MVP"/><published>2022-12-30T00:00:00+00:00</published><updated>2022-12-30T00:00:00+00:00</updated><id>https://georgerpu.github.io/blog/2022/nba-mvp</id><content type="html" xml:base="https://georgerpu.github.io/blog/2022/nba-mvp/"><![CDATA[<p>The 2022-2023 MVP race feels especially close this year. With Luka posting up more and the resurgence of KD, it feels like there are 5-7 players competing for the “best player in the NBA” title. This has affected the MVP race, where there have been 5 changes in the KIA MVP Ladder’s #1 spot.</p> <ol> <li>Giannis Antetokounmpo (Week 1-2)</li> <li>Luka Doncic (Week 3-4)</li> <li>Jayson Tatum (Week 5-7)</li> <li>Giannis Antetokounmpo (Week 8)</li> <li>Nikola Jokic (Week 9)</li> </ol> <p>Part of the reason is that there is no single criteria for MVP. There multiple axes, individual and team, along which players are evaluated and compared.</p> <h2 id="criteria">Criteria</h2> <h3 id="individual-stats">Individual Stats</h3> <p>All else being equal, player A should be ranked above player B if player A is better statistics. With the analytics revolution, there is an increased emphasis on advanced statistics TS which try to summarize player’s performance in single numbers. We will use the traditional slash line (PPG/RPG/APG), true shooting, basketball reference’s BPM, and NBA’s PIE.</p> <h3 id="team-performance">Team Performance</h3> <p>All else being equal, player A should be ranked above player B if player A’s team has a better record. Both the relative record and absolute record matter. We will use the conference ranking and W-L record.</p> <h3 id="with-you-vs-without-you">With You vs. Without You</h3> <p>All else being equal, player A should be ranked above player B if player A provides a bigger boost to his team. Player A is more essential to their team winning than player B. We will use on/off net rating.</p> <h3 id="playing-time">Playing Time</h3> <p>All else being equal, player A should be ranked above player B if player A plays more minutes and games. If a player misses time, they are not providing any value for their team on the court. We will use proportion of games played and minutes per game.</p> <h2 id="whats-the-mvp-ladder">What’s the MVP Ladder</h2> <p>Let’s look at the metrics of the most recent <a href="https://www.nba.com/news/kia-mvp-ladder-dec-30-2022-edition">KIA MVP Ladder</a> to determine who the MVP should be if the season ended now.</p> <table> <thead> <tr> <th>Player</th> <th>Points</th> <th>Rebounds</th> <th>Assists</th> <th>TS%</th> <th>BPM</th> <th>PIE</th> <th>Rank</th> <th>W-L</th> <th>On/Off Net</th> <th>Games</th> <th>Minutes</th> </tr> </thead> <tbody> <tr> <td>Nikola Jokic</td> <td>25.5</td> <td>10.9</td> <td>9.5</td> <td>68.6</td> <td>12.2</td> <td>20.9</td> <td>2</td> <td>23-12</td> <td>24.8</td> <td>32/35</td> <td>33.7</td> </tr> <tr> <td>Jayson Tatum</td> <td>31.0</td> <td>8.1</td> <td>4.0</td> <td>61.3</td> <td>5.7</td> <td>16.7</td> <td>1</td> <td>26-10</td> <td>11.0</td> <td>34/36</td> <td>36.9</td> </tr> <tr> <td>Luka Doncic</td> <td>33.7</td> <td>8.8</td> <td>8.9</td> <td>61.8</td> <td>11.5</td> <td>21.8</td> <td>6</td> <td>20-16</td> <td>8.9</td> <td>33/36</td> <td>36.9</td> </tr> <tr> <td>Kevin Durant</td> <td>29.9</td> <td>6.9</td> <td>5.4</td> <td>67.2</td> <td>6.9</td> <td>18.6</td> <td>3</td> <td>23-12</td> <td>7.0</td> <td>34/35</td> <td>36.4</td> </tr> <tr> <td>Giannis Antetokounmpo</td> <td>32.1</td> <td>11.8</td> <td>5.2</td> <td>58.9</td> <td>7.9</td> <td>19.7</td> <td>2</td> <td>23-12</td> <td>-0.8</td> <td>30/35</td> <td>33.7</td> </tr> <tr> <td>Joel Embiid</td> <td>33.8</td> <td>9.7</td> <td>4.3</td> <td>64.0</td> <td>8.5</td> <td>21.1</td> <td>5</td> <td>20-14</td> <td>8.2</td> <td>26/34</td> <td>35.7</td> </tr> <tr> <td>Zion Williamson</td> <td>26.2</td> <td>6.9</td> <td>4.6</td> <td>65.3</td> <td>6.3</td> <td>17.0</td> <td>1</td> <td>23-12</td> <td>6.4</td> <td>27/35</td> <td>33.3</td> </tr> <tr> <td>Ja Morant</td> <td>26.8</td> <td>6.2</td> <td>8.1</td> <td>54.5</td> <td>5.6</td> <td>17.2</td> <td>3</td> <td>21-13</td> <td>9.0</td> <td>29/34</td> <td>32.5</td> </tr> <tr> <td>Jaylen Brown</td> <td>27.0</td> <td>7.2</td> <td>3.4</td> <td>59.0</td> <td>1.6</td> <td>13.8</td> <td>1</td> <td>26-10</td> <td>-3.3</td> <td>34/36</td> <td>35.8</td> </tr> <tr> <td>Donovan Mitchell</td> <td>28.4</td> <td>3.8</td> <td>4.5</td> <td>62.7</td> <td>6.7</td> <td>15.2</td> <td>4</td> <td>22-14</td> <td>-3.8</td> <td>32/36</td> <td>36.3</td> </tr> <tr> <td>Devin Booker</td> <td>27.1</td> <td>4.6</td> <td>5.6</td> <td>58.5</td> <td>4.0</td> <td>14.4</td> <td>7</td> <td>20-17</td> <td>6.1</td> <td>29/37</td> <td>34.6</td> </tr> <tr> <td>Stephen Curry</td> <td>30.0</td> <td>6.6</td> <td>6.8</td> <td>66.8</td> <td>9.4</td> <td>17.9</td> <td>9</td> <td>19-18</td> <td>15.2</td> <td>26/37</td> <td>34.4</td> </tr> <tr> <td>Shai Gilgeous-Alexander</td> <td>31.4</td> <td>4.8</td> <td>5.8</td> <td>62.1</td> <td>6.9</td> <td>17.4</td> <td>12</td> <td>15-20</td> <td>4.8</td> <td>32/35</td> <td>35.8</td> </tr> <tr> <td>Julius Randle</td> <td>23.8</td> <td>9.7</td> <td>3.7</td> <td>59.1</td> <td>4.0</td> <td>14.6</td> <td>8</td> <td>18-18</td> <td>-0.3</td> <td>36/36</td> <td>34.7</td> </tr> <tr> <td>Domantas Sabonis</td> <td>18.6</td> <td>12.3</td> <td>6.7</td> <td>68.9</td> <td>6.8</td> <td>16.9</td> <td>5</td> <td>19-15</td> <td>10.7</td> <td>33/34</td> <td>33.8</td> </tr> </tbody> </table> <p>Right away, we can eliminate Jaylen Brown. For every metrics, his value is equal or worse than that of his teammate Jayson Tatum. We can also eliminate several guards who are worse than their peers in all but one metric.</p> <ul> <li><strong>Devin Booker</strong>. Luka Doncic beats Devin Booker in every metric.</li> <li><strong>Donovan Mitchell</strong>. Kevin Durant beats Donovan Mitchell in every metric.</li> <li><strong>Shai Gilgeous-Alexander</strong>. Luka Doncic beats SGA in every metric except for a 0.3 lead in true shooting, which is negligible.</li> <li><strong>Ja Morant</strong>. Nikola Jokic beats Ja Morant in every metric except for a 1.3 lead in points per game, which is negligible.</li> </ul> <p>Interestingly, all eliminated players form a continuous block from 7-13 in KIA MVP ladder, save for Steph Curry. These players are the most overrated in the KIDA MVP ladder. We can eliminate 3 more players at the bottom of the KIA MVP ladder by comparing them to Nikola Jokic.</p> <ul> <li><strong>Stephen Curry</strong>. Nikola Jokic beats Stephen Curry in every metric except 4.5 points per game and 0.7 minutes per game. The additional 4.5 points are not trivial, but this alone is not enough to outweigh the gap in team performance and playing time.</li> <li><strong>Julius Randle</strong>. Nikola Jokic beats Julius Randle in every metric except for 3 games played and 0.1 minutes per game. The extra 3 games are not trivial so early into the season, but Jokic is better than Randle in every individual statistic. This gap is more impressive.</li> <li><strong>Zion Williamson</strong>. Nikola Jokic beats Zion Williamson in every metric except for 0.7 points per game and team ranking, even thought both teams have the same record. Both are negligible.</li> </ul> <p>All eliminated players are 7-14 in the KIA MVP ladder. This means that the ladder is pretty good, aside from massively underrating Sabonis. The upper half of the MVP race is Nikola Jokic, Jayson Tatum, Luka Doncic, Kevin Durant, Giannis Antetokounmpo, Joel Embiid, and Domantas Sabonis. Of these, Sabonis is the easiest to eliminate. He leads Jokic in 4 metrics: 1.4 rebounds, 0.1 TS%, 1 game played, and 0.1 minutes per game. Only the 1.4 lead in rebounds per game is non-negligible, but Jokic has much larger leads in points and team performance. This leaves 6 players remaining in the MVP race.</p> <table> <thead> <tr> <th>Player</th> <th>Points</th> <th>Rebounds</th> <th>Assists</th> <th>TS%</th> <th>BPM</th> <th>PIE</th> <th>Rank</th> <th>W-L</th> <th>On/Off Net</th> <th>Games</th> <th>Minutes</th> </tr> </thead> <tbody> <tr> <td>Nikola Jokic</td> <td>25.5</td> <td>10.9</td> <td>9.5</td> <td>68.6</td> <td>12.2</td> <td>20.9</td> <td>2</td> <td>23-12</td> <td>24.8</td> <td>32/35</td> <td>33.7</td> </tr> <tr> <td>Jayson Tatum</td> <td>31.0</td> <td>8.1</td> <td>4.0</td> <td>61.3</td> <td>5.7</td> <td>16.7</td> <td>1</td> <td>26-10</td> <td>11.0</td> <td>34/36</td> <td>36.9</td> </tr> <tr> <td>Luka Doncic</td> <td>33.7</td> <td>8.8</td> <td>8.9</td> <td>61.8</td> <td>11.5</td> <td>21.8</td> <td>6</td> <td>20-16</td> <td>8.9</td> <td>33/36</td> <td>36.9</td> </tr> <tr> <td>Kevin Durant</td> <td>29.9</td> <td>6.9</td> <td>5.4</td> <td>67.2</td> <td>6.9</td> <td>18.6</td> <td>3</td> <td>23-12</td> <td>7.0</td> <td>34/35</td> <td>36.4</td> </tr> <tr> <td>Giannis Antetokounmpo</td> <td>32.1</td> <td>11.8</td> <td>5.2</td> <td>58.9</td> <td>7.9</td> <td>19.7</td> <td>2</td> <td>23-12</td> <td>-0.8</td> <td>30/35</td> <td>33.7</td> </tr> <tr> <td>Joel Embiid</td> <td>33.8</td> <td>9.7</td> <td>4.3</td> <td>64.0</td> <td>8.5</td> <td>21.1</td> <td>5</td> <td>20-14</td> <td>8.2</td> <td>26/34</td> <td>35.7</td> </tr> </tbody> </table> <p>Embiid and Giannis are the first to drop out. They have played the least number of games. Since the season is still young, missing 8 and 5 games is significant. They do not have vastly superior individual statistics, team performance, or contribution in the form of on/off net rating to make up for this gap. Both are great defenders, but their defense is not valuable when they are on the bench. Moreover, Embiid and Giannis are arguably the worst offensive players of the 6, due to their passing and, for Giannis, efficiency limitations due to his inability to shoot. Thus, the top 4 MVP candidates are Nikola Jokic, Jayson Tatum, Luka Doncic, and Kevin Durant. Determining the MVP from here will require subjective arguments weighing the important of some metrics over others.</p> <ol> <li><strong>Jayson Tatum</strong>. Although Jayson Tatum’s team has had the best record, his individual statistics are entirely dwarfed by Luka Donic’s. Since the MVP award is to an individual, the gap in individual performance is more important than the gap in team performance.</li> <li><strong>Kevin Durant</strong>. Kevin Durant scores more points per game than Jokic, but Jokic’s passing advantage provides a minimum of 10 extra points to his team per game. With Kyrie Irving, Kevin Durant has a better supporting cast than Jokic with Jamal Murry still recovering from his ACL injury in 2021. The Nuggets get a bigger boost from Jokic than the Net’s do from Kevin Durant.</li> <li><strong>Luka Doncic</strong>. While the Maverick’s superstar is having a season for the ages, I think Jokic’s efficiency gap and team performance gap are more important than Doncic’s extra points per game. Jokic’s lesser points per game reflect a greater interest in passing than scoring, even though he has the ability to score more points. Against the Warriors in the playoffs, he averaged 31.0 PPG on 64.3 TS%. His lack of scoring is not hurting the Nugget’s offense, which has an offensive rating of 132.9 with Jokic on the court vs. 123.8 with Doncic.</li> </ol> <p>If the season were to end right now, I would hand the MVP trophy to Nikola Jokic for the third time. Of course, the season is not over and the extra ~50 games will make it much easier to determine the MVP.</p>]]></content><author><name></name></author><category term="basketball"/><summary type="html"><![CDATA[The NBA MVP so far]]></summary></entry><entry><title type="html">Advice to New Graduates in Software Engineering</title><link href="https://georgerpu.github.io/blog/2022/advice-to-new-grads/" rel="alternate" type="text/html" title="Advice to New Graduates in Software Engineering"/><published>2022-07-24T00:00:00+00:00</published><updated>2022-07-24T00:00:00+00:00</updated><id>https://georgerpu.github.io/blog/2022/advice-to-new-grads</id><content type="html" xml:base="https://georgerpu.github.io/blog/2022/advice-to-new-grads/"><![CDATA[<p>Update 2023-03-25: Added more points and new section on documents.</p> <h2 id="onboarding">Onboarding</h2> <ol> <li>Introduce yourself to your teammates in 30 minute 1:1 meetings. Go through your team’s software systems with another engineer.</li> <li>Create (or update) your team’s onboarding guide as you are onboarding. In 6 months, you will struggle to remember how it was to be new.</li> </ol> <h2 id="this-isnt-kansas-school-anymore">This Isn’t <del>Kansas</del> School Anymore</h2> <ol> <li>Ask for help after 30 minutes to 1 hour of fruitless searching. You don’t get extra points for completing tasks solo.</li> <li>You will have to nag people to get responses.</li> <li>Use messaging for quick conversations but switch to a voice call if there is substantial back and forth.</li> </ol> <h2 id="ramping-up">Ramping Up</h2> <ol> <li>Find a mentor. A mentor is anyone you speak with regularly and offers advice.</li> <li>Learn your team’s code base by reading through it<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>. Given a feature request, you should instinctively know what code changes need to be made.</li> <li>Navigate other team’s code bases (if you have permission) for examples.</li> </ol> <h2 id="getting-more-done">Getting More Done</h2> <ol> <li>Success requires failure. Your skill will only grow if you are constantly using and stretching them.</li> <li>Improving developer experience is always worth the effort. Having good test suites, documentation, and even IDE plugins will save future time spend developing future code and fixing operational issues.</li> <li>Aim to complete familiar tasks in less time. Completing simple tasks fast opens time for complex tasks.</li> <li>Learn your IDE. Advanced IDEs like IntelliJ contain tools that can save you hours of work<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup>.</li> </ol> <h2 id="documents">Documents</h2> <ol> <li>The key to writing good documents is getting them reviewed by others before they are presented.</li> <li>Documents should be written for a broad audience. Future readers (maybe even you) might not know the history surrounding the document.</li> <li>Take advantage of READMEs. They are easier to find than other documentation.</li> </ol> <h2 id="promotion">Promotion</h2> <ol> <li>Each company has its own promotion process. Understand it.</li> <li>Document your work in a <a href="https://jvns.ca/blog/brag-documents/">brag document</a> as you complete it. It will be too hard to remember the details of a project months later. Any new learnings should be documented and shared with the team.</li> <li>Your job is not to complete assigned tasks but to improve the overall performance of your team. If you see opportunity to improve some system or process your team owns, pursue it.</li> </ol> <hr/> <div class="footnotes" role="doc-endnotes"> <ol> <li id="fn:1" role="doc-endnote"> <p>This is much easier to do when you first join a team/company. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> <li id="fn:2" role="doc-endnote"> <p>Some good ones are Optimize Imports and the Refactoring tools. <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> </ol> </div>]]></content><author><name></name></author><category term="computer-science"/><summary type="html"><![CDATA[Lessons from 1 year as a software engineer]]></summary></entry><entry><title type="html">Solution to Olympiad level counting</title><link href="https://georgerpu.github.io/blog/2022/solutions-to-olympiad/" rel="alternate" type="text/html" title="Solution to Olympiad level counting"/><published>2022-05-30T00:00:00+00:00</published><updated>2022-05-30T00:00:00+00:00</updated><id>https://georgerpu.github.io/blog/2022/solutions-to-olympiad</id><content type="html" xml:base="https://georgerpu.github.io/blog/2022/solutions-to-olympiad/"><![CDATA[<p>In 3Blue1Brown’s latest video <a href="https://www.youtube.com/watch?v=bOXCLR3Wric&amp;t=22s">Olympiad level counting: How many subsets of {1,…,2000} have a sum divisible by 5?</a>, you can find a few easy exercises at the <a href="https://youtu.be/bOXCLR3Wric?t=2054">end</a>. These are the solutions.</p> <h2 id="problem-1">Problem 1</h2> \[\begin{align*} \frac{d}{dx} \left[ \frac{1}{1 - x} \right] &amp;= \frac{d}{dx} \left[ \sum_{n=0}^{\infty} x^n \right] \\ \frac{1}{(1 - x)^2} &amp;= \sum_{n=0}^{\infty} nx^{n-1} \end{align*}\] <p>Note that the first term of the sum is 0 so,</p> \[\sum_{n=0}^{\infty} nx^{n-1} = \sum_{n=1}^{\infty} nx^{n-1}.\] <p>There are infinitely many scenarios you can roll a die before being the number 1.</p> <table> <thead> <tr> <th>Number of rolls</th> <th>Scenario</th> <th>Probability</th> </tr> </thead> <tbody> <tr> <td>1</td> <td>Roll 1</td> <td>$1/6$</td> </tr> <tr> <td>2</td> <td>Roll 2-6, roll 1</td> <td>$5/6 \cdot 1/6$</td> </tr> <tr> <td>…</td> <td> </td> <td> </td> </tr> <tr> <td>$n$</td> <td>Roll 2-6 $n - 1$ times, roll 1</td> <td>$(5/6)^{n-1} (1/6)$</td> </tr> <tr> <td>…</td> <td> </td> <td> </td> </tr> </tbody> </table> <p>Then the expected value of the number of rolls before seeing 1 is</p> \[\sum_{n=1}^{\infty} n p_n = \sum_{n=1}^{\infty} n (5/6)^{n-1} (1/6) = (1/6) \sum_{n=1}^{\infty} n(5/6)^{n-1}.\] <p>Let $x = 5/6$.</p> \[\sum_{n=1}^{\infty} nx^{n-1} = \frac{1}{(1 - x)^2} = \frac{1}{(1 - 5/6)^2} = \frac{1}{1/36} = 36\] <p>Thus the expected number of rolls before seeing 1 is $(1/6)36 = 6$.</p> <h2 id="problem-2">Problem 2</h2> <p>Using the Binomial Theorem,</p> \[(1 + x)^n = \sum_{k=0}^{n} {n \choose k} x^k.\] <p>Letting $x = 2$,</p> \[\sum_{k=0}^{n} {n \choose k} 2^k = (1 + 2)^n = 3^n.\] <h2 id="problem-3">Problem 3</h2> \[\begin{align*} F(x) &amp;= \sum_{n=0}^{\infty} f_n \frac{x^n}{n!} \\ F'(x) &amp;= \sum_{n=1}^{\infty} f_n \frac{x^{n-1}}{(n - 1)!} \\ F''(x) &amp;= \sum_{n=2}^{\infty} f_n \frac{x^{n-2}}{(n - 2)!} \end{align*}\] <p>We can reindex the bottom 2 sums by placing $n$ by $n + 1$ and $n + 2$ respectively. \(\begin{align*} F'(x) &amp;= \sum_{n=0}^{\infty} f_{n+1} \frac{x^n}{n!} \\ F''(x) &amp;= \sum_{n=0}^{\infty} f_{n+2} \frac{x^n}{n!} \end{align*}\) Thus, \(F''(x) = \sum_{n=0}^{\infty} f_{n+2} \frac{x^n}{n!} = \sum_{n=0}^{\infty} (f_{n+1} + f_n) \frac{x^n}{n!} = F'(x) + F(x).\)</p> <h3 id="bonus">Bonus</h3> \[\begin{align*} F''(x) &amp;= F'(x) + F(x) \\ F''(x) - F'(x) - F(x) &amp;= 0 \end{align*}\] <p>The characteristic of the homogeneous second order differential equation is $x^2 - x - 1 = 0$ which has roots</p> \[x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a} = \frac{1 \pm \sqrt{1 + 4}}{2} = \frac{1 \pm \sqrt{5}}{2}\] <p>Because there are 2 distinct real roots, the general solution is</p> \[F(x) = c_1e^{\frac{1 + \sqrt{5}}{2}x} + c_2 e^{\frac{1 - \sqrt{5}}{2}x}.\] <p>Since $F(0) = 0$ and $F’(0) = 1$,</p> \[\begin{align*} 0 &amp;= c_1 + c_2 \\ 0 &amp;= \frac{1 + \sqrt{5}}{2} c_1 + \frac{1 - \sqrt{5}}{2} c_2. \end{align*}\] <p>Thus,</p> \[\begin{align*} 1 &amp;= \left( \frac{1 + \sqrt{5}}{2} - \frac{1 - \sqrt{5}}{2} \right) c_1 \\ &amp;= \frac{1 + \sqrt{5} - 1 + \sqrt{5}}{2} c_1 \\ &amp;= \frac{2\sqrt{5}}{2} c_1 \\ c_1 &amp;= \frac{1}{\sqrt{5}} \\ c_2 &amp;= -\frac{1}{\sqrt{5}} \end{align*}\] <p>Recall that $e^x = \sum_{n=0}^{\infty} \frac{x^n}{n!}$.</p> \[\begin{align*} F(x) &amp;= \frac{1}{\sqrt{5}} \sum_{n=0}^{\infty} \frac{(\frac{1 + \sqrt{5}}{2})^n x^n}{n!} - \frac{1}{\sqrt{5}} \sum_{n=0}^{\infty} \frac{(\frac{1 - \sqrt{5}}{2})^n x^n}{n!} \\ &amp;= \sum_{n=0}^{\infty} \frac{(\frac{1 + \sqrt{5}}{2})^n x^n - (\frac{1 - \sqrt{5}}{2})^n x^n}{\sqrt{5} n!} \\ &amp;= \sum_{n=0}^{\infty} \frac{(\frac{1 + \sqrt{5}}{2})^n - (\frac{1 - \sqrt{5}}{2})^n}{\sqrt{5}} \frac{x^n}{n!} = \sum_{n=0}^{\infty} f_n \frac{x^n}{n!} \end{align*}\] <p>Hence,</p> \[f_n = \frac{1}{\sqrt{5}} \left[ \left( \frac{1 + \sqrt{5}}{2} \right)^n - \left( \frac{1 - \sqrt{5}}{2} \right)^n \right].\] <h2 id="problem-4">Problem 4</h2> <p>Recall from Problem 1 that</p> \[\frac{1}{1 - x} = \sum_{n=0}^{\infty} x^n.\] <p>Thus,</p> \[\begin{align*} \frac{f(x)}{1 - x} &amp;= \left( \sum_{n=0}^{\infty} a_n x^n \right) \left( \sum_{n=0}^{\infty} x^n \right) \\ &amp;= \left( a_0 + a_1x + a_2x^2 + \cdots \right) \left( 1 + x + x^2 + \cdots \right) \\ &amp;= a_0 + a_0x + a_0x^2 + \cdots \\ &amp;\qquad \,\,\, + \, a_1x + a_1x^2 + \cdots \\ &amp;\qquad\qquad\quad\, + \, a_2x^2 + \cdots \\ &amp;= \sum_{n=0}^{\infty} S_n x^n \end{align*}\] <p>where $S_n = \sum_{k=0}^{n} a_k$ is the partial sum of the coefficients up to $a_n$.</p>]]></content><author><name></name></author><category term="mathematics"/><summary type="html"><![CDATA[How many subsets of {1,…,2000} have a sum divisible by 5?]]></summary></entry><entry><title type="html">How To Control For Confounding Variables</title><link href="https://georgerpu.github.io/blog/2022/confounding/" rel="alternate" type="text/html" title="How To Control For Confounding Variables"/><published>2022-02-12T00:00:00+00:00</published><updated>2022-02-12T00:00:00+00:00</updated><id>https://georgerpu.github.io/blog/2022/confounding</id><content type="html" xml:base="https://georgerpu.github.io/blog/2022/confounding/"><![CDATA[<p>The goal of any science is to rigorously determine causal relationships between variables. In many sciences, usually social sciences, this is very difficult due to the high number of variables. Psychology studies the human mind–the most complex physical system in the universe–whose activity is determined by the interactions of 100 billion neurons. Economics and political science and sociology study the interactions of millions of irrational actors called humans.</p> <p><strong>Example</strong> (Tutoring). Suppose we want to investigate the impact of tutoring on high school grades. We collect data by surveying students the amount of after school tutoring they receive and their report cards. Plotting the data shows a clear linear trend; grades are proportional to tutoring hours. However, there are alternative explanations for this pattern. Wealthier households can pay for more tutoring but also reside in wealthier neighborhoods with more school.</p> <p><strong>Example</strong> (Cancer). Suppose we want to investigate the impact of eating 30g of fiber per day on colon cancer. We collect data by surveying adults 60 and older their average daily fiber intake and whether they have colon cancer. Fitting a logistic regression to the data shows that the probability of colon cancer decreases with the consumption of fiber. However, there are altnerative explanations for this pattern. Healthier individuals often have a diet richer in fiber. Their overall better health may be preventing colon cancer.</p> <p>Variables like household wealth are called <strong>confounders</strong>. More formally, a variable $Z$ (household wealth, health) is confounding if it casually influences the <strong>independent variable</strong> $X$ (tutoring, fiber intake) and the <strong>dependent variable</strong> $Y$ (high school grades, cancer rates). Confounders muddle the true relationship between $X$ and $Y$. Hence the quote</p> <blockquote> <p>Correlation does not equal causation.</p> </blockquote> <div class="jekyll-diagrams diagrams mermaid"> <svg id="mermaid-1707203925764" width="100%" xmlns="http://www.w3.org/2000/svg" style="max-width: 744.265625px;" viewBox="0 0 744.265625 107"><style>#mermaid-1707203925764 .label{font-family:trebuchet ms,verdana,arial;color:#333}#mermaid-1707203925764 .node circle,#mermaid-1707203925764 .node ellipse,#mermaid-1707203925764 .node polygon,#mermaid-1707203925764 .node rect{fill:#ececff;stroke:#9370db;stroke-width:1px}#mermaid-1707203925764 .node.clickable{cursor:pointer}#mermaid-1707203925764 .arrowheadPath{fill:#333}#mermaid-1707203925764 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1707203925764 .edgeLabel{background-color:#e8e8e8}#mermaid-1707203925764 .cluster rect{fill:#ffffde!important;stroke:#aa3!important;stroke-width:1px!important}#mermaid-1707203925764 .cluster text{fill:#333}#mermaid-1707203925764 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:trebuchet ms,verdana,arial;font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1707203925764 .actor{stroke:#ccf;fill:#ececff}#mermaid-1707203925764 text.actor{fill:#000;stroke:none}#mermaid-1707203925764 .actor-line{stroke:grey}#mermaid-1707203925764 .messageLine0{marker-end:"url(#arrowhead)"}#mermaid-1707203925764 .messageLine0,#mermaid-1707203925764 .messageLine1{stroke-width:1.5;stroke-dasharray:"2 2";stroke:#333}#mermaid-1707203925764 #arrowhead{fill:#333}#mermaid-1707203925764 #crosshead path{fill:#333!important;stroke:#333!important}#mermaid-1707203925764 .messageText{fill:#333;stroke:none}#mermaid-1707203925764 .labelBox{stroke:#ccf;fill:#ececff}#mermaid-1707203925764 .labelText,#mermaid-1707203925764 .loopText{fill:#000;stroke:none}#mermaid-1707203925764 .loopLine{stroke-width:2;stroke-dasharray:"2 2";marker-end:"url(#arrowhead)";stroke:#ccf}#mermaid-1707203925764 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1707203925764 .noteText{fill:#000;stroke:none;font-family:trebuchet ms,verdana,arial;font-size:14px}#mermaid-1707203925764 .section{stroke:none;opacity:.2}#mermaid-1707203925764 .section0{fill:rgba(102,102,255,.49)}#mermaid-1707203925764 .section2{fill:#fff400}#mermaid-1707203925764 .section1,#mermaid-1707203925764 .section3{fill:#fff;opacity:.2}#mermaid-1707203925764 .sectionTitle0,#mermaid-1707203925764 .sectionTitle1,#mermaid-1707203925764 .sectionTitle2,#mermaid-1707203925764 .sectionTitle3{fill:#333}#mermaid-1707203925764 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px}#mermaid-1707203925764 .grid .tick{stroke:#d3d3d3;opacity:.3;shape-rendering:crispEdges}#mermaid-1707203925764 .grid path{stroke-width:0}#mermaid-1707203925764 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1707203925764 .task{stroke-width:2}#mermaid-1707203925764 .taskText{text-anchor:middle;font-size:11px}#mermaid-1707203925764 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px}#mermaid-1707203925764 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1707203925764 .taskText0,#mermaid-1707203925764 .taskText1,#mermaid-1707203925764 .taskText2,#mermaid-1707203925764 .taskText3{fill:#fff}#mermaid-1707203925764 .task0,#mermaid-1707203925764 .task1,#mermaid-1707203925764 .task2,#mermaid-1707203925764 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1707203925764 .taskTextOutside0,#mermaid-1707203925764 .taskTextOutside1,#mermaid-1707203925764 .taskTextOutside2,#mermaid-1707203925764 .taskTextOutside3{fill:#000}#mermaid-1707203925764 .active0,#mermaid-1707203925764 .active1,#mermaid-1707203925764 .active2,#mermaid-1707203925764 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1707203925764 .activeText0,#mermaid-1707203925764 .activeText1,#mermaid-1707203925764 .activeText2,#mermaid-1707203925764 .activeText3{fill:#000!important}#mermaid-1707203925764 .done0,#mermaid-1707203925764 .done1,#mermaid-1707203925764 .done2,#mermaid-1707203925764 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1707203925764 .doneText0,#mermaid-1707203925764 .doneText1,#mermaid-1707203925764 .doneText2,#mermaid-1707203925764 .doneText3{fill:#000!important}#mermaid-1707203925764 .crit0,#mermaid-1707203925764 .crit1,#mermaid-1707203925764 .crit2,#mermaid-1707203925764 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1707203925764 .activeCrit0,#mermaid-1707203925764 .activeCrit1,#mermaid-1707203925764 .activeCrit2,#mermaid-1707203925764 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1707203925764 .doneCrit0,#mermaid-1707203925764 .doneCrit1,#mermaid-1707203925764 .doneCrit2,#mermaid-1707203925764 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1707203925764 .activeCritText0,#mermaid-1707203925764 .activeCritText1,#mermaid-1707203925764 .activeCritText2,#mermaid-1707203925764 .activeCritText3,#mermaid-1707203925764 .doneCritText0,#mermaid-1707203925764 .doneCritText1,#mermaid-1707203925764 .doneCritText2,#mermaid-1707203925764 .doneCritText3{fill:#000!important}#mermaid-1707203925764 .titleText{text-anchor:middle;font-size:18px;fill:#000}
#mermaid-1707203925764 g.classGroup text{fill:#9370db;stroke:none;font-family:trebuchet ms,verdana,arial;font-size:10px}#mermaid-1707203925764 g.classGroup rect{fill:#ececff;stroke:#9370db}#mermaid-1707203925764 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1707203925764 .classLabel .box{stroke:none;stroke-width:0;fill:#ececff;opacity:.5}#mermaid-1707203925764 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1707203925764 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1707203925764 #compositionEnd,#mermaid-1707203925764 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1707203925764 #aggregationEnd,#mermaid-1707203925764 #aggregationStart{fill:#ececff;stroke:#9370db;stroke-width:1}#mermaid-1707203925764 #dependencyEnd,#mermaid-1707203925764 #dependencyStart,#mermaid-1707203925764 #extensionEnd,#mermaid-1707203925764 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1707203925764 .branch-label,#mermaid-1707203925764 .commit-id,#mermaid-1707203925764 .commit-msg{fill:#d3d3d3;color:#d3d3d3}</style><style>#mermaid-1707203925764{color:#000;font:normal normal 400 normal 16px / normal "Times New Roman"}</style><g transform="translate(-12, -12)"><g class="output"><g class="clusters"></g><g class="edgePaths"><g class="edgePath" style="opacity: 1;"><path class="path" d="M123.625,77.20595761695321L169.5078125,92L215.390625,92" marker-end="url(#arrowhead18)" style="fill:none"></path><defs><marker id="arrowhead18" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M123.625,43.794042383046786L169.5078125,29L300.1171875,29L481.828125,29L578.8125,45.812459693022056" marker-end="url(#arrowhead19)" style="fill:none"></path><defs><marker id="arrowhead19" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M384.84375,92L481.828125,92L578.8125,75.18754030697795" marker-end="url(#arrowhead20)" style="stroke: #333; fill:none;stroke-width:2px;stroke-dasharray:3;"></path><defs><marker id="arrowhead20" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 0 0 L 0 0 z" style="fill: #333"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" style="opacity: 1;" transform="translate(169.5078125,92)"><g transform="translate(-20.8828125,-9)" class="label"><foreignObject width="41.765625" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">causes</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(300.1171875,29)"><g transform="translate(-20.8828125,-9)" class="label"><foreignObject width="41.765625" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">causes</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(481.828125,92)"><g transform="translate(-71.984375,-9)" class="label"><foreignObject width="143.96875" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">relationship of interest</span></div></foreignObject></g></g></g><g class="nodes"><g class="node" id="Z" transform="translate(71.8125,60.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-51.8125" y="-19" width="103.625" height="38"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-41.8125,-9)"><foreignObject width="83.625" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Confounder</div></foreignObject></g></g></g><g class="node" id="X" transform="translate(300.1171875,92)" style="opacity: 1;"><rect rx="0" ry="0" x="-84.7265625" y="-19" width="169.453125" height="38"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-74.7265625,-9)"><foreignObject width="149.453125" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Independent variable</div></foreignObject></g></g></g><g class="node" id="Y" transform="translate(663.5390625,60.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-84.7265625" y="-19" width="169.453125" height="38"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-74.7265625,-9)"><foreignObject width="149.453125" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Independent variable</div></foreignObject></g></g></g></g></g></g></svg> </div> <h2 id="experiment-design">Experiment Design</h2> <p>The easiest way to eliminate confounders is through careful experiment design. In a <strong>controlled experiment</strong>, researchers set the value of the independent variable $X$ for subjects.</p> <h3 id="randomization">Randomization</h3> <p><strong>Randomization</strong> assigns subjects to <strong>control groups</strong>, doing nothing, and <strong>treatment groups</strong> randomly. Assignment sets the independent variable $X$ without adjusting any confounder $Z$. For a sufficiently large sample of subjects, any overall change in $Y$ can be attributed to $X$ alone as the control and treatment groups will have identical distributions of $Z$ values.</p> <p><strong>Example</strong> (Tutoring). We could gather 1000 freshman high school students. 50 students would be randomly assigned weekly tutoring sessions. The remaining 50 students form the control group.</p> <p><strong>Example</strong> (Cancer). We could gather 1000 adults. 500 adults would be randomly assigned a diet high in fiber. The remaining 500 adults form the control group.</p> <h3 id="matching">Matching</h3> <p>If the confounder $Z$ is known, subjects can be <strong>matched</strong> with another subject of equal $Z$ value. Thus, any difference between the pair is attributable to the independent variable $X$ alone. This approach is inferior to randomization since it cannot address unknown confounders but doesn’t require as large of a sample. A special case of matching is <strong>restriction</strong> which uses only subjects with a fixed $Z$ value.</p> <p><strong>Example</strong> (Tutoring). We could gather 200 high school students whose various households have a range of incomes. The students are grouped into pairs with equal household income. One student in each pair is assigned to treatment tutoring sessions while the other is put into the control group.</p> <p><strong>Example</strong> (Cancer). We could gather 200 adults who get varying levels of weekly exercise. The adults are grouped into pairs with similar weekly exercise levels. One adult in each pair is assigned to the treatment diet while the other is put into the control group.</p> <h2 id="data-analysis">Data Analysis</h2> <p>Often, controlled experiments are unethical or impractical. In an <strong>observation study</strong>, the researchers record independent, dependent, and confounding variable values without affecting them.</p> <h3 id="stratification">Stratification</h3> <p><strong>Stratification</strong> is like a post-experiment matching. Subjects with similar confounding variable values $Z$ are grouped into strata. Any differences of the dependent variable $Y$ within strata are can attributed due to the independent variable $X$ alone. Similar to matching, stratification cannot account for unknown confounding variables. Moreover, as the number of confounding variables increases, the number of strata needed increases exponentially.</p> <p><strong>Example</strong> (Tutoring). After surveying data from 1000 students, we break them into 10 household income buckets. Students are placed in each bucket based on their household income.</p> <p><strong>Example</strong> (Cancer). After surveying data from 1000 adults, we break them into 10 time buckets. Adults are placed in each bucket based on their weekly exercise levels. If we want to account for sleep as well, we might need 100 buckets for exercise and sleep levels.</p> <h3 id="multi-variate-regression">Multi-variate Regression</h3> <p>Instead we can fit a multivariate linear regression predicting grades $Y$ given hours of tutoring $X$ and household income $Z$. Assuming we have diverse examples where $X, Y$ are both low and high, the estimated parameters should be accurate.</p> \[Y = \alpha + \beta X + \gamma Z\] <p>Here $\beta$ measures the effect of a change in $X$ assuming no change in $Z$.</p> <p>Compared to stratification which exponentially increases the number of strata as confounders are added, it is easier to add confounders to a regression model.</p> <p><strong>Example</strong> (Tutoring). We fit a regression model to our survey data. If hours of tutoring has no effect on grades, then $\beta \approx 0$ as all the variation in $Y$ can be explained by $Z$ alone. If tutoring positively influences grades beyond the confounding effect of household income, then $\beta$ will be positive.</p> <p><strong>Example</strong> (Cancer). We fit a logistic regression model to our survey data. If fiber intake has no effect on colon cancer, then $\beta = 0$. If fiber intake negatively influences the probability of colon cancer beyond the confounding effect of overall health, then $\beta$ will be negative.</p> <h2 id="propensity-score-matching">Propensity Score Matching</h2> <p>A <strong>propensity score</strong> is the probability of a subject being in the treatment group given the background characteristics $\Pr(X = 1 \mid Z = z)$. We can fit a model that estimates propensity scores based any confounding variables. Each subject who received the treatment is matched to a subject who received the comparator with an equivalent propensity score.</p> <p>Because propensity scores combine multiple confounders into a single summary score, these methods are preferred when the treatment of interest is common and outcome of interest are rare, a setting where multivariable outcome models are susceptible to overfitting.</p> <p><strong>Example</strong> (Tutoring). We fit a linear regression model that estimates tutoring hours based on household income and other variables like parent education to our survey data. We match students who have high tutoring hours with students who have low tutoring hours but equal propensity score.</p> <p><strong>Example</strong> (Cancer). We fit a linear regression model that estimates fiber intake based on age, weekly exercise hours, average sleep time, etc. to our survey data. We match adults who have high fiber consumption with adults who have low fiber intake.</p> <h2 id="overadjusting">Overadjusting</h2> <p>It is important not to overadjust for confounding variables. In particular, when the “confounding variable” $Z$ is an effect of the independent variable $X$, we should not adjust for $Z$. This is because $Z$ might be a part of the mechanism through which $X$ affects the dependent variable $Y$.</p> <div class="jekyll-diagrams diagrams mermaid"> <svg id="mermaid-1707203926136" width="100%" xmlns="http://www.w3.org/2000/svg" style="max-width: 682.40625px;" viewBox="0 0 682.40625 107"><style>#mermaid-1707203926136 .label{font-family:trebuchet ms,verdana,arial;color:#333}#mermaid-1707203926136 .node circle,#mermaid-1707203926136 .node ellipse,#mermaid-1707203926136 .node polygon,#mermaid-1707203926136 .node rect{fill:#ececff;stroke:#9370db;stroke-width:1px}#mermaid-1707203926136 .node.clickable{cursor:pointer}#mermaid-1707203926136 .arrowheadPath{fill:#333}#mermaid-1707203926136 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1707203926136 .edgeLabel{background-color:#e8e8e8}#mermaid-1707203926136 .cluster rect{fill:#ffffde!important;stroke:#aa3!important;stroke-width:1px!important}#mermaid-1707203926136 .cluster text{fill:#333}#mermaid-1707203926136 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:trebuchet ms,verdana,arial;font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1707203926136 .actor{stroke:#ccf;fill:#ececff}#mermaid-1707203926136 text.actor{fill:#000;stroke:none}#mermaid-1707203926136 .actor-line{stroke:grey}#mermaid-1707203926136 .messageLine0{marker-end:"url(#arrowhead)"}#mermaid-1707203926136 .messageLine0,#mermaid-1707203926136 .messageLine1{stroke-width:1.5;stroke-dasharray:"2 2";stroke:#333}#mermaid-1707203926136 #arrowhead{fill:#333}#mermaid-1707203926136 #crosshead path{fill:#333!important;stroke:#333!important}#mermaid-1707203926136 .messageText{fill:#333;stroke:none}#mermaid-1707203926136 .labelBox{stroke:#ccf;fill:#ececff}#mermaid-1707203926136 .labelText,#mermaid-1707203926136 .loopText{fill:#000;stroke:none}#mermaid-1707203926136 .loopLine{stroke-width:2;stroke-dasharray:"2 2";marker-end:"url(#arrowhead)";stroke:#ccf}#mermaid-1707203926136 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1707203926136 .noteText{fill:#000;stroke:none;font-family:trebuchet ms,verdana,arial;font-size:14px}#mermaid-1707203926136 .section{stroke:none;opacity:.2}#mermaid-1707203926136 .section0{fill:rgba(102,102,255,.49)}#mermaid-1707203926136 .section2{fill:#fff400}#mermaid-1707203926136 .section1,#mermaid-1707203926136 .section3{fill:#fff;opacity:.2}#mermaid-1707203926136 .sectionTitle0,#mermaid-1707203926136 .sectionTitle1,#mermaid-1707203926136 .sectionTitle2,#mermaid-1707203926136 .sectionTitle3{fill:#333}#mermaid-1707203926136 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px}#mermaid-1707203926136 .grid .tick{stroke:#d3d3d3;opacity:.3;shape-rendering:crispEdges}#mermaid-1707203926136 .grid path{stroke-width:0}#mermaid-1707203926136 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1707203926136 .task{stroke-width:2}#mermaid-1707203926136 .taskText{text-anchor:middle;font-size:11px}#mermaid-1707203926136 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px}#mermaid-1707203926136 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1707203926136 .taskText0,#mermaid-1707203926136 .taskText1,#mermaid-1707203926136 .taskText2,#mermaid-1707203926136 .taskText3{fill:#fff}#mermaid-1707203926136 .task0,#mermaid-1707203926136 .task1,#mermaid-1707203926136 .task2,#mermaid-1707203926136 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1707203926136 .taskTextOutside0,#mermaid-1707203926136 .taskTextOutside1,#mermaid-1707203926136 .taskTextOutside2,#mermaid-1707203926136 .taskTextOutside3{fill:#000}#mermaid-1707203926136 .active0,#mermaid-1707203926136 .active1,#mermaid-1707203926136 .active2,#mermaid-1707203926136 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1707203926136 .activeText0,#mermaid-1707203926136 .activeText1,#mermaid-1707203926136 .activeText2,#mermaid-1707203926136 .activeText3{fill:#000!important}#mermaid-1707203926136 .done0,#mermaid-1707203926136 .done1,#mermaid-1707203926136 .done2,#mermaid-1707203926136 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1707203926136 .doneText0,#mermaid-1707203926136 .doneText1,#mermaid-1707203926136 .doneText2,#mermaid-1707203926136 .doneText3{fill:#000!important}#mermaid-1707203926136 .crit0,#mermaid-1707203926136 .crit1,#mermaid-1707203926136 .crit2,#mermaid-1707203926136 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1707203926136 .activeCrit0,#mermaid-1707203926136 .activeCrit1,#mermaid-1707203926136 .activeCrit2,#mermaid-1707203926136 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1707203926136 .doneCrit0,#mermaid-1707203926136 .doneCrit1,#mermaid-1707203926136 .doneCrit2,#mermaid-1707203926136 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1707203926136 .activeCritText0,#mermaid-1707203926136 .activeCritText1,#mermaid-1707203926136 .activeCritText2,#mermaid-1707203926136 .activeCritText3,#mermaid-1707203926136 .doneCritText0,#mermaid-1707203926136 .doneCritText1,#mermaid-1707203926136 .doneCritText2,#mermaid-1707203926136 .doneCritText3{fill:#000!important}#mermaid-1707203926136 .titleText{text-anchor:middle;font-size:18px;fill:#000}
#mermaid-1707203926136 g.classGroup text{fill:#9370db;stroke:none;font-family:trebuchet ms,verdana,arial;font-size:10px}#mermaid-1707203926136 g.classGroup rect{fill:#ececff;stroke:#9370db}#mermaid-1707203926136 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1707203926136 .classLabel .box{stroke:none;stroke-width:0;fill:#ececff;opacity:.5}#mermaid-1707203926136 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1707203926136 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1707203926136 #compositionEnd,#mermaid-1707203926136 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1707203926136 #aggregationEnd,#mermaid-1707203926136 #aggregationStart{fill:#ececff;stroke:#9370db;stroke-width:1}#mermaid-1707203926136 #dependencyEnd,#mermaid-1707203926136 #dependencyStart,#mermaid-1707203926136 #extensionEnd,#mermaid-1707203926136 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1707203926136 .branch-label,#mermaid-1707203926136 .commit-id,#mermaid-1707203926136 .commit-msg{fill:#d3d3d3;color:#d3d3d3}</style><style>#mermaid-1707203926136{color:#000;font:normal normal 400 normal 16px / normal "Times New Roman"}</style><g transform="translate(-12, -12)"><g class="output"><g class="clusters"></g><g class="edgePaths"><g class="edgePath" style="opacity: 1;"><path class="path" d="M183.50682043650795,51.5L235.3359375,39L301.390625,39" marker-end="url(#arrowhead18)" style="fill:none"></path><defs><marker id="arrowhead18" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M405.015625,39L471.0703125,39L522.899429563492,51.5" marker-end="url(#arrowhead19)" style="fill:none"></path><defs><marker id="arrowhead19" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M183.50682043650795,89.5L235.3359375,102L353.203125,102L471.0703125,102L522.899429563492,89.5" marker-end="url(#arrowhead20)" style="stroke: #333; fill:none;stroke-width:2px;stroke-dasharray:3;"></path><defs><marker id="arrowhead20" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 0 0 L 0 0 z" style="fill: #333"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" style="opacity: 1;" transform="translate(235.3359375,39)"><g transform="translate(-20.8828125,-9)" class="label"><foreignObject width="41.765625" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">causes</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(471.0703125,39)"><g transform="translate(-20.8828125,-9)" class="label"><foreignObject width="41.765625" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">causes</span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform="translate(353.203125,102)"><g transform="translate(-71.984375,-9)" class="label"><foreignObject width="143.96875" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">relationship of interest</span></div></foreignObject></g></g></g><g class="nodes"><g class="node" id="X" transform="translate(104.7265625,70.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-84.7265625" y="-19" width="169.453125" height="38"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-74.7265625,-9)"><foreignObject width="149.453125" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Independent variable</div></foreignObject></g></g></g><g class="node" id="Z" transform="translate(353.203125,39)" style="opacity: 1;"><rect rx="0" ry="0" x="-51.8125" y="-19" width="103.625" height="38"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-41.8125,-9)"><foreignObject width="83.625" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Confounder</div></foreignObject></g></g></g><g class="node" id="Y" transform="translate(601.6796875,70.5)" style="opacity: 1;"><rect rx="0" ry="0" x="-84.7265625" y="-19" width="169.453125" height="38"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-74.7265625,-9)"><foreignObject width="149.453125" height="18"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Independent variable</div></foreignObject></g></g></g></g></g></g></svg> </div> <p><strong>Example</strong> (Tutoring). If we were studying the relationship between household income and grades instead of tutoring hours and grades, extra tutoring hours might be one reason students from high income households do better. Confounders $Z$ should be correlated with $X$ but not caused by $Z$.</p> <p><strong>Example</strong> (Cancer). If we were studying the relationship between age and colon cancer instead of fiber intake and colon cancer, decreased fiber intake might be one reason older adults have higher rates of colon cancer.</p> <h2 id="resources">Resources</h2> <ol> <li>https://www.sciencedirect.com/science/article/pii/S0085253815529748</li> <li>https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8786092/</li> <li>https://oem.bmj.com/content/62/7/500</li> </ol>]]></content><author><name></name></author><category term="mathematics"/><summary type="html"><![CDATA[Seperating signal from noise]]></summary></entry><entry><title type="html">2021 in Books</title><link href="https://georgerpu.github.io/blog/2021/books/" rel="alternate" type="text/html" title="2021 in Books"/><published>2021-12-31T00:00:00+00:00</published><updated>2021-12-31T00:00:00+00:00</updated><id>https://georgerpu.github.io/blog/2021/books</id><content type="html" xml:base="https://georgerpu.github.io/blog/2021/books/"><![CDATA[<h2 id="history">History</h2> <h3 id="this-is-china-the-first-5000-years---haiwang-yuan-general-editor">This is China: The First 5,000 Years - Haiwang Yuan (General Editor)</h3> <p><em>This is China</em> is short book, 126 pages of content with medium sized font. It covers the history of China from the Xia dynasty<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup> to the present day. Since it is so short, not many words can be devoted to each period of Chinese history. Despite the title, <em>This is China</em> does not provide a detailed description of 5000 years of Chinese history. Instead, the book tries to portray long term historical trends and cultural achievements. On its own, I did not find <em>This is China</em> a compelling read. Bit <em>This is China</em> would make a satisfactory history textbook for a high school or introductory college class.</p> <h3 id="the-search-for-modern-china---jonathan-spencer">The Search for Modern China - Jonathan Spencer</h3> <p><em>The Search for Modern China</em> tells the history of China from the late Ming dynasty to the 1990, when the book was published. It covers all the significant events in China post 1500. It covers the late Ming to the expansion of China under the Kangxi and Qianlong Emperors to the First Opium War to the Taiping rebellion<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup> to the end of the Qing in only 269 pages. The remainder is devoted to the highly tumultuous 20th century: the new Republic of China, its decent to warlordism, the rise of the Nationalists and Communists, the Nanjing Decade, World War II, the conclusion of the Chinese Civil War, the creation of the PRC, the Great Leap Forward, the Cultural Revolution, and the reformist 1980s. Throughout, Spencer focuses on intellectual history, often bringing up authors, playwrights, poets, and painters whose works were influential or captured the zeitgeist. This choice makes sense when we consider that the dominant class in most of Chinese history have been Confucian bureaucrat. Spencer also uses tables to illustrate the economic conditions of a time.</p> <p>It tells a good, if temporally uneven story of modern China up to 1976. The later chapters suffer from myopia. In 1990, the Tianmen Square massacre was less than a year old. Hong Kong was still a British colony. <em>Search for Modern China</em> does not focus enough on the economic reforms of the 1980s, which birthed a superpower. It does not focus enough on the One Child Policy, which has created a looming demographic crisis. These are minor weaknesses; <em>Search for Modern China</em> is a historical work not a geopolitical prediction. But the 30 years of perspective is important. From 2021, we know that the search for modern China is over. Now begins the search for a what world with a modern China will look like.</p> <h2 id="social-science">Social Science</h2> <h3 id="gang-leader-for-a-day---sudhir-venkatesh">Gang Leader for a Day - Sudhir Venkatesh</h3> <p>When I was a teenager, I read <em>Freakonomics</em>. It from Freakonomics where I heard the opening story of the book: Venkatesh had wandered into a public housing project where he was forced to stay the night by the local gang. Yet at the end of this harrowing experience, he returned to learn more about the gang and the residents of the Robert Taylor homes. For the duration of his graduate studies at the University of Chicago, Venkatesh observed the Black Kings gang and its interactions with tenants. What emerges is a rich picture of difficult circumstances, community grit, and self-sabotage. Things are never simple. The Black Kings sell drugs and commit violent acts, but they also keep the peace in the housing project. The Black Kings mediate disputes, protect women from crackheads, and even fund block parties. Residents of the Robert Taylor homes work together to raise children and protect them from violent crime. <em>Gang Leader for a Day</em> is an incredible work of ethnographic research, painting a complex world most Americans never see.</p> <p>It is also a personal story, as Venkatesh gets close to the gang leader J.T. Venkatesh eats soul food cooked by Ms. Mae, J.T.’s mother, in her apartment while completing classwork. Initially, he is only allowed supervised tours of the Robert Taylor homes. It takes years of relationship building before Venkatesh is able to roam freely throughout the high rises of the Robert Taylor homes. Eventually, Venkatesh gains deep access to the gang and their territory: acquiring a copy of the gang’s books and, yes, becoming a gang leader for day. In one instance, Venkatesh is deeply involved, including dragging an injured resident to the lobby during a drive-by shooting. Over 7 years, they had grown to rely on each other, which makes their separation an emotional affair, something neither could have suspected when Venkatesh was forced to stay a night by the local gang.</p> <hr/> <div class="footnotes" role="doc-endnotes"> <ol> <li id="fn:1" role="doc-endnote"> <p>It is disputed whether the Xia dynasty is mythological or was real. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> <li id="fn:2" role="doc-endnote"> <p>The Taiping Rebellion is the second deadliest conflict in history, with twice as many deaths as World War I. <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p> </li> </ol> </div>]]></content><author><name></name></author><category term="books"/><summary type="html"><![CDATA[All the books I read in 2021]]></summary></entry><entry><title type="html">New Mac Setup 2021</title><link href="https://georgerpu.github.io/blog/2021/new-mac-setup/" rel="alternate" type="text/html" title="New Mac Setup 2021"/><published>2021-11-11T00:00:00+00:00</published><updated>2021-11-11T00:00:00+00:00</updated><id>https://georgerpu.github.io/blog/2021/new-mac-setup</id><content type="html" xml:base="https://georgerpu.github.io/blog/2021/new-mac-setup/"><![CDATA[<p>In late 2021, I switched my personal computer from a Surface Book 2 to a new M1 Pro Macbook Pro. It has been quite an experience switching OSes. To help, I created this setup guide.</p> <h2 id="homebrew">Homebrew</h2> <p>The de facto MacOS package manager. I prefer to install apps via Homebrew, if possible.</p> <p>Install by following the instructions at <a href="https://brew.sh">https://brew.sh</a>.</p> <h2 id="oh-my-zsh">Oh My Zsh</h2> <p>A customizable configuration and plugin system for Zsh.</p> <p>Install by following the instructions at <a href="https://ohmyz.sh">https://ohmyz.sh</a>.</p> <h3 id="powerlevel10k">Powerlevel10k</h3> <p>An Oh My Zsh Theme.</p> <p>Install by following the instructions at <a href="https://github.com/romkatv/powerlevel10k#oh-my-zsh">https://github.com/romkatv/powerlevel10k#oh-my-zsh</a>. Use the Oh My Zsh method. Run <code class="language-plaintext highlighter-rouge">p10k configure</code> to configure the theme.</p> <h2 id="anaconda">Anaconda</h2> <p>A data science flavored Python installation with by far the best Python package manager.</p> <p>Install by following the instructions at <a href="https://www.anaconda.com">https://www.anaconda.com</a>. The “Install for me” option creates Anaconda directory at <code class="language-plaintext highlighter-rouge">~/opt/anaconda3</code>.</p> <h3 id="pycharm">PyCharm</h3> <p>A Python IDE with developer and scientific tools.</p> <p>To install, navigate to the Download page of <a href="https://www.jetbrains.com/pycharm/">https://www.jetbrains.com/pycharm/</a>.</p> <h2 id="git">Git</h2> <p>Git comes preinstalled on Macs.</p> <h3 id="github-desktop">Github Desktop</h3> <p>The official GUI client for Github. For a more advanced GUI client see <a href="https://fork.dev/">https://fork.dev/</a>.</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install</span> <span class="nt">--cask</span> github
</code></pre></div></div> <h2 id="java">Java</h2> <p>Maybe the popular programming language for individuals and enterprises.</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install </span>openjdk
</code></pre></div></div> <h3 id="intellij">IntelliJ</h3> <p>The best Java IDE.</p> <p>To install, navigate to the Download page of <a href="https://www.jetbrains.com/idea/">https://www.jetbrains.com/idea/</a>.</p> <h2 id="julia">Julia</h2> <p>A scientific programming language that is as fast as C++, but as easy as Python. Note that the ARM installation for MacOS is currently Tier 3.</p> <p>Install by following the instructions at <a href="https://julialang.org">https://julialang.org</a>.</p> <h2 id="latex">Latex</h2> <p>The de facto LaTeX distribution for Mac is MacTeX.</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install</span> <span class="nt">--cask</span> mactex-no-gui
</code></pre></div></div> <h3 id="texpad">Texpad</h3> <p>A feature laden, MacOS exclusive LaTeX editor.</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install</span> <span class="nt">--cask</span> texpad
</code></pre></div></div> <h3 id="texstudio">Texstudio</h3> <p>The best LaTeX editor across multiple systems.</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install</span> <span class="nt">--cask</span> texstudio
</code></pre></div></div> <h2 id="nodejs">NodeJS</h2> <p>A Desktop JS runtime built on Chrome’s V8 engine. The current LTS version is 16.</p> <p>Install using Homebrew.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew install node@16
</code></pre></div></div> <h2 id="apps">Apps</h2> <h3 id="appcleaner">Appcleaner</h3> <p>An Application uninstaller that searches through the entire file system.</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install</span> <span class="nt">--cask</span> appcleaner
</code></pre></div></div> <h3 id="chrome">Chrome</h3> <p>The de facto internet browser (to our benefit and detriment).</p> <p>Install by following the instructions at <a href="https://www.google.com/chrome/">https://www.google.com/chrome/</a>.</p> <h3 id="discord">Discord</h3> <p>Gaming centric chat and voice rooms.</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install</span> <span class="nt">--cask</span> discord
</code></pre></div></div> <h3 id="iterm2">iTerm2</h3> <p>iTerm2 is to Terminal what Windows Terminal is to Command Prompt.</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install</span> <span class="nt">--cask</span> iterm2
</code></pre></div></div> <h3 id="monitor-control">Monitor Control</h3> <p>Allow you to control the brightness of external monitors using the brightness keys on your keyboard or a brightness slider in the menu bar.</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install</span> <span class="nt">--cask</span> monitorcontrol
</code></pre></div></div> <h3 id="onedrive">OneDrive</h3> <p>A cloud file storage client. Included on Windows machines by default.</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install</span> <span class="nt">--cask</span> onedrive
</code></pre></div></div> <h3 id="nota">Nota</h3> <p>A new Markdown editor from the creators of Caret.</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install</span> <span class="nt">--cask</span> nota
</code></pre></div></div> <h3 id="rectangle">Rectangle</h3> <p>A window size manager for MacOS. Rectangle is free unlike Magnet.</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install</span> <span class="nt">--cask</span> rectangle
</code></pre></div></div> <h3 id="scroll-reverser">Scroll Reverser</h3> <p>Allows the scroll direction to be different for mouse and trackpad.</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install</span> <span class="nt">--cask</span> scroll-reverser
</code></pre></div></div> <h3 id="spotify">Spotify</h3> <p>The most popular app for streaming music and listening to podcasts</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install</span> <span class="nt">--cask</span> spotify
</code></pre></div></div> <h3 id="strongbox">Strongbox</h3> <p>The best Keepass client for MacOS. Strongbox also has an iOS app.</p> <p>Download from the App store.</p> <p><a href="https://strongboxsafe.com">https://strongboxsafe.com</a></p> <h3 id="things">Things</h3> <p>Todo list software preferences are person specific, but Things delivers everything I expect from a todo list in a beautiful package.</p> <p>Download from the App store.</p> <p><a href="https://culturedcode.com/things/">https://culturedcode.com/things/</a></p> <h3 id="typora">Typora</h3> <p>The best Markdown editor on any OS.</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install</span> <span class="nt">--cask</span> typora
</code></pre></div></div> <h3 id="vscode">VSCode</h3> <p>The best text editor for programming.</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install</span> <span class="nt">--cask</span> visual-studio-code
</code></pre></div></div> <p>Login to Github to sync settings and extensions. Alternatively, install the following extensions.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># general</span>
code <span class="nt">--install-extension</span> visualstudioexptteam.vscodeintellicode
code <span class="nt">--install-extension</span> ms-vscode-remote.vscode-remote-extensionpack
code <span class="nt">--install-extension</span> mhutchie.git-graph
code <span class="nt">--install-extension</span> christian-kohler.path-intellisense
<span class="c"># other views</span>
code <span class="nt">--install-extension</span> ms-vscode.hexeditor
<span class="c"># github</span>
code <span class="nt">--install-extension</span> github.remotehub
code <span class="nt">--install-extension</span> github.copilot
<span class="c"># python</span>
code <span class="nt">--install-extension</span> ms-python.python
code <span class="nt">--install-extension</span> ms-toolsai.jupyter-renderers
code <span class="nt">--install-extension</span> njpwerner.autodocstring
code <span class="nt">--install-extension</span> kevinrose.vsc-python-indent
<span class="c"># html + javascript + css</span>
code <span class="nt">--install-extension</span> mgmcdermott.vscode-language-babel
code <span class="nt">--install-extension</span> dbaeumer.vscode-eslint
code <span class="nt">--install-extension</span> bradlc.vscode-tailwindcss
code <span class="nt">--install-extension</span> mikestead.dotenv
<span class="c"># c++</span>
code <span class="nt">--install-extension</span> ms-vscode.cpptools
<span class="c"># markdown</span>
code <span class="nt">--install-extension</span> bierner.markdown-mermaid
<span class="c"># theming</span>
code <span class="nt">--install-extension</span> zhuangtongfa.material-theme
code <span class="nt">--install-extension</span> pkief.material-icon-theme
</code></pre></div></div> <p>Follow the instructions at <a href="https://patelhiren.com/blog/setting-vscode-as-default-text-editor-on-macos/">https://patelhiren.com/blog/setting-vscode-as-default-text-editor-on-macos/</a> to make VSCode the default text editor.</p> <h3 id="zoom">Zoom</h3> <p>The de facto video call/conferencing app since March 2020.</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install</span> <span class="nt">--cask</span> zoom
</code></pre></div></div> <h2 id="zotero">Zotero</h2> <p>Free paper and reference manager with paid cloud storage. You should also install the Zotero Connector extension for your browser to add references to Zotero from the web.</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install</span> <span class="nt">--cask</span> zotero
</code></pre></div></div> <h2 id="utilities">Utilities</h2> <h3 id="fzf">fzf</h3> <p>Fuzzy finder to look up files. fzf also overrides 3 terminal keybindings that makes it easier to lookup old commands and change directories.</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install</span> <span class="nt">--cask</span> fzf
</code></pre></div></div> <h3 id="lsd">lsd</h3> <p>Colorized ls built using Rust.</p> <p>Install using Homebrew.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install </span>lsd
</code></pre></div></div> <h2 id="dock">Dock</h2> <p>From left to right: Finder, LaunchPad, Safari, Chrome, Mail, FaceTime, Messages, Mail, Maps, Photos, Calendar, Contacts, Reminders, Things, Notes, Typora, AppStore, System Preferences.</p> <h2 id="other-setup-guides">Other Setup Guides</h2> <ul> <li><a href="https://www.theverge.com/2019/12/27/21029022/best-macos-apps-apple-mac-macbook-air-pro-airmail-alfred-bear-lastpass-vlc">The 11 best apps for your new Mac</a></li> <li><a href="https://www.theverge.com/22188814/apple-apps-m1-macbook-air-pro-mac-mini-lightroom-office-2020">11 great apps ready for your new 2020 M1 Mac</a></li> <li><a href="https://sourabhbajaj.com/mac-setup/">https://sourabhbajaj.com/mac-setup/</a></li> <li><a href="https://www.swyx.io/new-mac-setup-2021">https://www.swyx.io/new-mac-setup-2021</a></li> </ul>]]></content><author><name></name></author><category term="computer-science"/><summary type="html"><![CDATA[Guide to setting up an ARM Mac for software development]]></summary></entry><entry><title type="html">Federated Learning of Cohorts</title><link href="https://georgerpu.github.io/blog/2021/floc/" rel="alternate" type="text/html" title="Federated Learning of Cohorts"/><published>2021-07-23T00:00:00+00:00</published><updated>2021-07-23T00:00:00+00:00</updated><id>https://georgerpu.github.io/blog/2021/floc</id><content type="html" xml:base="https://georgerpu.github.io/blog/2021/floc/"><![CDATA[<h2 id="introduction">Introduction</h2> <p>The primary means of monetization on the Web is via advertisements. Websites and services are often free to access, but will display visual or auditory advertisements before or during content. 15 second ads are displayed before videos; banner ads are displayed in the middle of articles. While advertisements are a centuries old way of paying for media, the internet introduced the possibility of tailored, <strong>personalized ads</strong>. Based on harvested data, an ad can be targeted for each user’s preferences. Repeated viewing of dog care websites might indicate that the user owns a dog. The ad service can then select and display an ad from a local veterinarian. Because personalized ads present ads when customers are most receptive to their message, they cost a premium compared to un-personalized ads <a class="citation" href="#techcrunch">(Lomas, 2019)</a>. The profitability of personalized ads has led to the creation of a vast Internet infrastructure for collecting users’ personal information and browsing data.</p> <h2 id="web-tracking">Web Tracking</h2> <h3 id="ip-address-tracking">IP Address Tracking</h3> <p>Each computer on a network is assigned a unique <strong>IPv4 address</strong>, with the first $0 \leq k \leq 32$ bits inherited from the network and the last $32 - k$​​​​​​​​ bits being specific to the computer. Any messages sent across the Internet are broken up into packets, which include the source and destination IP addresses in their headers.</p> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/2021-07-23/ip-packet.svg-480.webp"/> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/2021-07-23/ip-packet.svg-800.webp"/> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/2021-07-23/ip-packet.svg-1400.webp"/> <img src="/assets/img/2021-07-23/ip-packet.svg" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p>An IP packet from <a href="https://www.khanacademy.org/computing/computers-and-internet/xcae6f4a7ff015e7d:the-internet/xcae6f4a7ff015e7d:routing-with-redundancy/a/ip-packets&quot;">https://www.khanacademy.org/computing/computers-and-internet/xcae6f4a7ff015e7d:the-internet/xcae6f4a7ff015e7d:routing-with-redundancy/a/ip-packets"</a>.</p> <p>Because IPv4 addresses are hierarchical (your computer inherits from the router, the router inherits from the regional ISP), knowing the IP address is sufficient to determine a user’s location at the city or even neighborhood level. This is how Google is able to estimate your location at the bottom of their search results page. However, IP addresses change when switching networks. This can make it difficult to track more mobile devices like laptops, which may switch networks frequently. Moreover, because many home and organizations routers use NAT to conserve public IPv4 addresses, the IP address associated with an HTTP request may come from a number of different devices on the network. So IP address tracking is un-invasive but not precise enough to determine much about a user.</p> <h3 id="device-fingerprinting">Device Fingerprinting</h3> <p>The problems with IP address tracking (for user identification) can be solved by supplementing IP addresses with more data. <strong>Device fingerprinting</strong> attempts to collect enough data about the user’s device in an attempt to uniquely identify the user. The data is often run through a hashing algorithm to generate a shorter <strong>fingerprint</strong>. Any old hashing algorithm will do—such as those built into programming languages—or a more complex cryptographic hash can be used. Multiple sites using device fingerprinting can then track a user by their fingerprint and record their Web history.</p> <p>Much of this data can be harvested from the protocols used to access the Web: IP addresses, MAC addresses. TCP configurations and timestamps can be used to deduce the OS. For even more information, <strong>browser fingerprinting</strong> harvests data about and from the user’s browser using JavaScript: browser family/version, device properties such as screen size, and CPU/GPU information via HTML canvas elements. With enough attributes, devices can be finely distinguished.</p> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/2021-07-23/amiunique-480.webp"/> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/2021-07-23/amiunique-800.webp"/> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/2021-07-23/amiunique-1400.webp"/> <img src="/assets/img/2021-07-23/amiunique.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p><a href="https://amiunique.org/fp">https://amiunique.org/fp</a> was able to identify me amongst millions.</p> <h3 id="third-party-cookies">Third Party Cookies</h3> <p>A <strong>cookie</strong> is a small piece of data, in the form <code class="language-plaintext highlighter-rouge">name=value</code>, sent by a website to the browser that helps it identify that user. The cookie is inserted via a <code class="language-plaintext highlighter-rouge">Set-Cookie</code> field in the HTTP response. Every subsequent HTTP request to that website will contain the cookie following the <code class="language-plaintext highlighter-rouge">Cookie</code> header field. Cookies have a number of attributes:</p> <ul> <li>expiration date - future data cookie expires</li> <li>max-age - maximum time from insertion which cookie is valid</li> <li>domain - the URL in between ‘www.’ and /</li> <li>path - everything after .com, .org, etc.</li> </ul> <p>Cookies are distinguished into 2 categories: <strong>first</strong> and <strong>third party</strong>. For example, suppose, I visit <u>somewebsite.com</u>. Cookies added by <u>somewebsite.com</u> are first party. If <u>somewebsite.com</u> includes assets (e.g. images) from <u>adservice.com</u>, the browser will send a HTTP request to the new domain. Any cookies added by <u>adservice.com</u> are third party. If every visited website includes assets from <u>adservice.com</u>, it can track my exact browser history. The first party website that includes that asset can relay its URL to <u>adservice.com</u> via, for example, HTTP GET query parameters.</p> <div class="jekyll-diagrams diagrams mermaid"> <svg id="mermaid-1707203925165" width="100%" xmlns="http://www.w3.org/2000/svg" height="100%" style="max-width:650px;" viewBox="-50 -10 650 301"><style>#mermaid-1707203925165 .label{font-family:trebuchet ms,verdana,arial;color:#333}#mermaid-1707203925165 .node circle,#mermaid-1707203925165 .node ellipse,#mermaid-1707203925165 .node polygon,#mermaid-1707203925165 .node rect{fill:#ececff;stroke:#9370db;stroke-width:1px}#mermaid-1707203925165 .node.clickable{cursor:pointer}#mermaid-1707203925165 .arrowheadPath{fill:#333}#mermaid-1707203925165 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1707203925165 .edgeLabel{background-color:#e8e8e8}#mermaid-1707203925165 .cluster rect{fill:#ffffde!important;stroke:#aa3!important;stroke-width:1px!important}#mermaid-1707203925165 .cluster text{fill:#333}#mermaid-1707203925165 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:trebuchet ms,verdana,arial;font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1707203925165 .actor{stroke:#ccf;fill:#ececff}#mermaid-1707203925165 text.actor{fill:#000;stroke:none}#mermaid-1707203925165 .actor-line{stroke:grey}#mermaid-1707203925165 .messageLine0{marker-end:"url(#arrowhead)"}#mermaid-1707203925165 .messageLine0,#mermaid-1707203925165 .messageLine1{stroke-width:1.5;stroke-dasharray:"2 2";stroke:#333}#mermaid-1707203925165 #arrowhead{fill:#333}#mermaid-1707203925165 #crosshead path{fill:#333!important;stroke:#333!important}#mermaid-1707203925165 .messageText{fill:#333;stroke:none}#mermaid-1707203925165 .labelBox{stroke:#ccf;fill:#ececff}#mermaid-1707203925165 .labelText,#mermaid-1707203925165 .loopText{fill:#000;stroke:none}#mermaid-1707203925165 .loopLine{stroke-width:2;stroke-dasharray:"2 2";marker-end:"url(#arrowhead)";stroke:#ccf}#mermaid-1707203925165 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1707203925165 .noteText{fill:#000;stroke:none;font-family:trebuchet ms,verdana,arial;font-size:14px}#mermaid-1707203925165 .section{stroke:none;opacity:.2}#mermaid-1707203925165 .section0{fill:rgba(102,102,255,.49)}#mermaid-1707203925165 .section2{fill:#fff400}#mermaid-1707203925165 .section1,#mermaid-1707203925165 .section3{fill:#fff;opacity:.2}#mermaid-1707203925165 .sectionTitle0,#mermaid-1707203925165 .sectionTitle1,#mermaid-1707203925165 .sectionTitle2,#mermaid-1707203925165 .sectionTitle3{fill:#333}#mermaid-1707203925165 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px}#mermaid-1707203925165 .grid .tick{stroke:#d3d3d3;opacity:.3;shape-rendering:crispEdges}#mermaid-1707203925165 .grid path{stroke-width:0}#mermaid-1707203925165 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1707203925165 .task{stroke-width:2}#mermaid-1707203925165 .taskText{text-anchor:middle;font-size:11px}#mermaid-1707203925165 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px}#mermaid-1707203925165 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1707203925165 .taskText0,#mermaid-1707203925165 .taskText1,#mermaid-1707203925165 .taskText2,#mermaid-1707203925165 .taskText3{fill:#fff}#mermaid-1707203925165 .task0,#mermaid-1707203925165 .task1,#mermaid-1707203925165 .task2,#mermaid-1707203925165 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1707203925165 .taskTextOutside0,#mermaid-1707203925165 .taskTextOutside1,#mermaid-1707203925165 .taskTextOutside2,#mermaid-1707203925165 .taskTextOutside3{fill:#000}#mermaid-1707203925165 .active0,#mermaid-1707203925165 .active1,#mermaid-1707203925165 .active2,#mermaid-1707203925165 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1707203925165 .activeText0,#mermaid-1707203925165 .activeText1,#mermaid-1707203925165 .activeText2,#mermaid-1707203925165 .activeText3{fill:#000!important}#mermaid-1707203925165 .done0,#mermaid-1707203925165 .done1,#mermaid-1707203925165 .done2,#mermaid-1707203925165 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1707203925165 .doneText0,#mermaid-1707203925165 .doneText1,#mermaid-1707203925165 .doneText2,#mermaid-1707203925165 .doneText3{fill:#000!important}#mermaid-1707203925165 .crit0,#mermaid-1707203925165 .crit1,#mermaid-1707203925165 .crit2,#mermaid-1707203925165 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1707203925165 .activeCrit0,#mermaid-1707203925165 .activeCrit1,#mermaid-1707203925165 .activeCrit2,#mermaid-1707203925165 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1707203925165 .doneCrit0,#mermaid-1707203925165 .doneCrit1,#mermaid-1707203925165 .doneCrit2,#mermaid-1707203925165 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1707203925165 .activeCritText0,#mermaid-1707203925165 .activeCritText1,#mermaid-1707203925165 .activeCritText2,#mermaid-1707203925165 .activeCritText3,#mermaid-1707203925165 .doneCritText0,#mermaid-1707203925165 .doneCritText1,#mermaid-1707203925165 .doneCritText2,#mermaid-1707203925165 .doneCritText3{fill:#000!important}#mermaid-1707203925165 .titleText{text-anchor:middle;font-size:18px;fill:#000}
#mermaid-1707203925165 g.classGroup text{fill:#9370db;stroke:none;font-family:trebuchet ms,verdana,arial;font-size:10px}#mermaid-1707203925165 g.classGroup rect{fill:#ececff;stroke:#9370db}#mermaid-1707203925165 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1707203925165 .classLabel .box{stroke:none;stroke-width:0;fill:#ececff;opacity:.5}#mermaid-1707203925165 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1707203925165 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1707203925165 #compositionEnd,#mermaid-1707203925165 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1707203925165 #aggregationEnd,#mermaid-1707203925165 #aggregationStart{fill:#ececff;stroke:#9370db;stroke-width:1}#mermaid-1707203925165 #dependencyEnd,#mermaid-1707203925165 #dependencyStart,#mermaid-1707203925165 #extensionEnd,#mermaid-1707203925165 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1707203925165 .branch-label,#mermaid-1707203925165 .commit-id,#mermaid-1707203925165 .commit-msg{fill:#d3d3d3;color:#d3d3d3}</style><style>#mermaid-1707203925165{color:#000;font:normal normal 400 normal 16px / normal "Times New Roman"}</style><g></g><g><line id="actor0" x1="75" y1="5" x2="75" y2="290" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">Me</tspan></text></g><g><line id="actor1" x1="275" y1="5" x2="275" y2="290" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">somewebsite.com</tspan></text></g><g><line id="actor2" x1="475" y1="5" x2="475" y2="290" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="400" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">adservice.com</tspan></text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><g><text x="175" y="93" class="messageText" style="text-anchor: middle;">HTTP request</text><line x1="75" y1="100" x2="275" y2="100" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="175" y="128" class="messageText" style="text-anchor: middle;">Webpage (includes asset from webtracker.com)</text><line x1="275" y1="135" x2="75" y2="135" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="275" y="163" class="messageText" style="text-anchor: middle;">HTTP request</text><line x1="75" y1="170" x2="475" y2="170" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="275" y="198" class="messageText" style="text-anchor: middle;">HTTP response (Set-Cookie: id=abc)</text><line x1="475" y1="205" x2="75" y2="205" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="0" y="225" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="257.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">Me</tspan></text></g><g><rect x="200" y="225" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="257.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">somewebsite.com</tspan></text></g><g><rect x="400" y="225" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="257.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">adservice.com</tspan></text></g></svg> </div> <p>Third party cookies are the best means of tracking users, as the ad service can be certain that each user is uniquely identified. However, they are easy to defeat. The browser can simply refuse to store the cookie when it encounters a <code class="language-plaintext highlighter-rouge">Set-Cookie</code>. Moreover, it can do this exclusively to third party cookies by checking whether the cookie originates from the first party website (e.g. the cookie domain must be <u>somewebsite</u>). Both <a href="https://blog.mozilla.org/en/products/firefox/todays-firefox-blocks-third-party-tracking-cookies-and-cryptomining-by-default/">Firefox</a> and <a href="https://webkit.org/blog/10218/full-third-party-cookie-blocking-and-more/">Safari</a> do this by default. Cookie blocking is also a setting which can be enabled in <a href="https://support.microsoft.com/en-us/windows/delete-and-manage-cookies-168dab11-0753-043d-7c16-ede5947fc64d">Edge</a> and <a href="https://support.google.com/chrome/answer/95647?hl=en&amp;co=GENIE.Platform%3DDesktop">Chrome</a>. In fact, the Chromium project has <a href="https://blog.chromium.org/2020/01/building-more-private-web-path-towards.html">committed to blocking third party cookies</a> by default starting in 2022.</p> <h2 id="floc">FLoC</h2> <p>In the place of third party cookies, Google has proposed <strong>Federated Learning of Cohorts</strong> (FLoC) which groups users based on common interests <a class="citation" href="#googleblog">(Bindra, 2021)</a>. Users within each group would be indistinguishable, but their group membership would be sufficient to personalize advertisements. Each browser computes the interest cohort from local browsing data. Your Internet history is never transferred off your device. Because</p> <blockquote> <p>advertisers can expect to see <strong>at least 95% of the conversions per dollar spent when compared to cookie-based advertising</strong> [emphasis in original]</p> </blockquote> <p>there would be no need to track users across the Web. This prevents an ever escalating arms race, where advertisers turn to device fingerprinting and more nefarious schemes to target ads.</p> <h3 id="api">API</h3> <p>The API for FLoC consists of a single new function attached the <code class="language-plaintext highlighter-rouge">Document</code> interface, which represents a webpage loaded in the browser <a class="citation" href="#flocW3C">(Xiao &amp; Karlin, 2021)</a>. It returns a <code class="language-plaintext highlighter-rouge">Promise</code>; that is, the function is asynchronous. The exact implementation of this new function is not standardized. Different browsers could have different clustering algorithms.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">partial</span> <span class="kr">interface</span> <span class="nx">Document</span> <span class="p">{</span>
    <span class="nb">Promise</span><span class="o">&lt;</span><span class="p">;</span><span class="nx">InterestCohort</span><span class="o">&gt;</span><span class="p">;</span> <span class="nf">interestCohort</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">InterestCohort</code> is a user’s assigned interest group. It consists of an</p> <ul> <li><strong>interest cohort id</strong> - 32 bit integer representing the interest cohort (there does not necessarily need to be $2^{32}$ possible interest cohorts)</li> <li><strong>interest cohort version</strong> - identified algorithm used to generate interest cohort ID.</li> </ul> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">dictionary</span> <span class="nx">InterestCohort</span> <span class="p">{</span>
    <span class="nx">DOMString</span> <span class="nx">id</span><span class="p">;</span>
    <span class="nx">DOMString</span> <span class="nx">version</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="federated-clustering">Federated Clustering</h3> <p>Behind the API is a federated clustering algorithm that assigns a $p$​​-bit interest cohort ID to a $d$​-dimensional browsing history vector $x$​. Note that, because interest cohort IDs are 32 bit integers, $p \leq 32$​. A cohort ID is <strong>k-anonymous</strong> if it is shared by at least $k$​ users. That is, the interest cohort associated with that ID is a size $\geq k$​. In <a class="citation" href="#flocwhite">(Ravinchandran &amp; Vassilvitskii, 2020)</a>, Google proposes 3 federated clustering algorithms.</p> <p><strong>SimHash</strong> is a locality sensitive hashing algorithm first developed for Web crawling <a class="citation" href="#charikar2002similarity">(Charikar, 2002)</a>. The $i$th bit of the hash is</p> \[H(x)_i = \begin{cases} 0 &amp; w_i \cdot x \leq 0 \\ 1 &amp; w_i \cdot x &gt; 0 \end{cases}\] <p>where $w_1, \dots, w_p$ are random unit vectors. Geometrically, each unit vector $w_i$ defines an orthogonal hyperplane $\{y : w_i \cdot y = 0\}$. Together they partition the $d$-dimensional space into $2^p$ subsets which have unique hashes. SimHash has the property that close vectors are more likely to be assigned to the same cohort. The probability that two vectors $x_1 \neq x_2$ have the same hash is</p> \[\Pr(H(x_1) = H(x_2)) = \left( 1 - \frac{\theta}{\pi} \right)^p\] <p>where $\theta = \cos^{-1}\left( \frac{x_1 \cdot x_2}{|x_1||x_2|} \right)$ is the angle between the two vectors.</p> <p>This fact is not hard to see. Since the $w_1, \dots, w_n$​​​​​​ are independent, it suffices to show that $\Pr(H_i(x_1) = H_i(x_)) = 1 - \frac{\theta}{\pi}$​​​​​​. Fix $x_1, x_2 \in \mathbb{R}^d$​​​​​​. The vector $w$​​​​​​ defines a hyperplane $P = \{x \in \mathbb{R}^d : w_i \cdot x = 0\}$​​​​​​ which partitions $\mathbb{R}^d$​​​​​​ into two sets. If $x_1$​​​​​​ and $x_2$​​​​​​ lie on opposite sides of $P$​​​​​​, then $H_i(x_1) \neq H_i(x_2)$​​​​​​. Since $P$​​​​​​ must be between $x_1$​​​​​​ and $x_2$​​​​​​, there are $\theta$​​​​​​ possible orientations of $P$​​​​​​. However, for every hyperplane, there are two unit vectors that produce the hyperplane. So there are $2\theta$​​​​​​ possible directions for $w$​​​​​​ out of a total of $2\pi$​​​​​​. Thus, $\Pr(H_i(x_1) \neq H_i(x_2)) = \theta/\pi$​​​​​​. By the complement rule, $\Pr(H_i(x_1) = H_i(x_2)) = 1 - \theta$​​​​​​.</p> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/2021-07-23/simhash-proof-480.webp"/> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/2021-07-23/simhash-proof-800.webp"/> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/2021-07-23/simhash-proof-1400.webp"/> <img src="/assets/img/2021-07-23/simhash-proof.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <p>The vectors are in black. The possible dividing hyperplanes and associated unit vectors are in red. The negative unit vectors are in blue.</p> <p>The size of the interest cohorts depends on $p$. For large $p$, there are fewer, larger interest cohorts which better preserve privacy but are less useful to advertisers. For small $p$​, there are more, smaller interest cohorts of greater utility to advertisers that potentially violate k-anonymity. <strong>SortingLSH</strong> reduces this dependence through a central coordinating server. Let $h_1, \dots, h_n$ be hashes generated by SimHash, sorted in lexicographical order. Contiguous groups of $k$​ hashes are assigned to the same cohort. This way k-anonymity can be guaranteed.</p> <p>The final algorithm proposed is <strong>affinity hierarchical clustering with centroids</strong>. This is a fully centralized clustering algorithm.</p> <ol> <li>A graph is constructed with browsing histories as nodes and weighted edges connecting similar histories. In <a class="citation" href="#flocwhite">(Ravinchandran &amp; Vassilvitskii, 2020)</a>, the nodes are connected to the $k$​​​​​-nearest neighbors with cosine similarity weights. This requires full access to all users’ browsing histories.</li> <li>Clusters are formed hierarchically by joining highly connected smaller clusters. This is done until all clusters reach a minimum size. From these clusters, we extract the centroids.</li> <li>Users are assigned to the cohort whose centroid is the closest.</li> </ol> <p>A brief analysis of these 3 algorithms is conducted in <a class="citation" href="#flocwhite">(Ravinchandran &amp; Vassilvitskii, 2020)</a>, which I won’t reproduce here. In short, affinity hierarchical clustering with centroids and SortingLSH create the best interest cohorts but SimHash was good enough as a starting point for browsers.</p> <h2 id="reception">Reception</h2> <p>In 2021, Google has begun trials for FLoC in Chrome $\geq 89$ using <strong>PrefixLSH</strong> on domain names with a centralized server that blocks the API from return a cohort ids when the cohort is too small. (PrefixLSH starts off with 2 cohorts based on whether the SimHash starts with 0 or 1. Cohorts are split once they exceed 2000 users.) In response, privacy advocates have raising concerns with FLoC and its implementation <a class="citation" href="#eff">(Cyphers, 2021)</a>.</p> <ul> <li>The cohort IDs could be used in conjunction with other device data to uniquely identify users. Google has pledged to fight device fingerprinting as part of its broader Privacy Sandbox.</li> <li>Every website sees the same cohort ID, enabling to access irrelevant information about a user’s interests. Suppose a cohort ID 123 is associated with young Democratic women. Even if accessing a medical site, it might be able to determine your political affiliation. This is necessary for FLoC to work, since a user should see the personalized ads across unrelated websites.</li> <li>Cohort IDs could be used to discriminate. In fact, targeted advertising has already been used for this purpose <a class="citation" href="#eff">(Cyphers, 2021)</a>. To prevent cohort IDs from exposing sensitive data, Google aims to <a href="https://github.com/WICG/floc#excluding-sensitive-categories">monitor cohorts</a> and adjust the clustering algorithm in response.</li> </ul> <p>No other browser has decided to support the feature, including all Chromium based browsers save for Chrome. This negative reception has led Google to <a href="https://blog.google/products/chrome/updated-timeline-privacy-sandbox-milestones">delay third party cookie ban</a> until 2023.</p> <h2 id="the-future-of-floc">The Future of FLoC</h2> <p>At its heart, FLoC aims to preserve the current monetization structure of the Internet centered around personalized ads. To those who oppose the current Internet regime, FLoC is unacceptable. Groups like the Electronic Frontier Foundation would prefer an end to personalized ads <a class="citation" href="#eff">(Cyphers, 2021)</a>, with users volunteering as little information as required to each webservice. Even though other browsers have declined to implement FLoC, Chrome has a plurality of browser market share. Google has the power to advance FLoC unilaterally. The company has strong incentive to make something like FLoC standard. Over 80% of their revenue comes from the sale of online advertising.</p> <p>Perhaps the best justification for FloC is that it is a privacy preserving compromise with advertisers. By providing enough, but not too much, information about the user, its creators hope that websites won’t turn to more nefarious means of Web tracking. This stops the otherwise endless arms race between privacy tools and advertisers. In particular, device fingerprinting is effective at isolating users while being difficult to stop, something even FLoC critics acknowledge <a class="citation" href="#eff">(Cyphers, 2021)</a>. Unlike third party cookies, they cannot be easily blocked as they use JavaScript and HTML. Without either, many websites do not function.</p> <p>The final version of FLoC, if the whole project isn’t abandoned, will no doubt undergo major changes from its current state. Despite the name, the current version of FLoC does not incorporate any federated learning. Because devices only contain a single browsing history, little learning can be done on device. Deep learning is more likely to appear in the form of centralized unsupervised learning on large datasets of browsing histories. These models would then be embedded into the browser releases. For example, contrastive learning could be used to train a model that embeds browsing histories such that similar histories are close while dissimilar ones are far apart. Browsing histories could be permuted slightly, or domain names replaced with synonyms. The embedding space is then divided into cohorts.</p> <h2 id="references">References</h2> <ol class="bibliography"><li><span id="techcrunch">Lomas, N. (2019). <i>Targeted ads offer little extra value for online publishers, study suggests</i>. https://techcrunch.com/2019/05/31/targeted-ads-offer-little-extra-value-for-online-publishers-study-suggests</span></li> <li><span id="googleblog">Bindra, C. (2021). <i>Building a privacy-first future for web advertising</i>. https://blog.google/products/ads-commerce/2021-01-privacy-sandbox</span></li> <li><span id="flocW3C">Xiao, Y., &amp; Karlin, J. (2021). <i>Federated Learning of Cohorts Draft Community Group Report</i>. World Wide Web Consortium. https://wicg.github.io/floc/</span></li> <li><span id="flocwhite">Ravinchandran, D., &amp; Vassilvitskii, S. (2020). <i>FLoC Whitepaper</i>. Google. https://github.com/google/ads-privacy/blob/master/proposals/FLoC/FLOC-Whitepaper-Google.pdf</span></li> <li><span id="charikar2002similarity">Charikar, M. S. (2002). Similarity estimation techniques from rounding algorithms. <i>Proceedings of the Thiry-Fourth Annual ACM Symposium on Theory of Computing</i>, 380–388.</span></li> <li><span id="eff">Cyphers, B. (2021). <i>Googles FLoC Is a Terrible Idea</i>. Electronic Frontier Foundation. https://www.eff.org/deeplinks/2021/03/googles-floc-terrible-idea</span></li></ol>]]></content><author><name></name></author><category term="artificial-intelligence"/><summary type="html"><![CDATA[The World Wide Web after 3rd party cookies]]></summary></entry></feed>
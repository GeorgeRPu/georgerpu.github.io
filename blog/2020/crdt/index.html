<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Conflict Free Replicated Data Types | George Pu </title> <meta name="author" content="George Pu"> <meta name="description" content="A survey of simple CRDTs and their future in computing"> <meta name="keywords" content="academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-table@1.22.4/dist/bootstrap-table.min.css" integrity="sha256-uRX+PiRTR4ysKFRCykT8HLuRCub26LgXJZym3Yeom1c=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%A7%AE&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://georgerpu.github.io/blog/2020/crdt/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">George</span> Pu </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">Conflict Free Replicated Data Types</h1> <p class="post-meta"> Created in July 20, 2020 </p> <p class="post-tags"> <a href="/blog/2020"> <i class="fa-solid fa-calendar fa-sm"></i> 2020 </a>   ·   <a href="/blog/tag/computer-science"> <i class="fa-solid fa-hashtag fa-sm"></i> computer-science</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="introduction">Introduction</h2> <p>Back in 2017, I used Atom as my primary text editor. It was pretty and customizable—some features like <a href="https://github.atom.io/" rel="external nofollow noopener" target="_blank">GitHub integration</a>, <a href="https://atom.io/packages/hydrogen" rel="external nofollow noopener" target="_blank">running Python code inline</a>, or <a href="https://github.blog/2018-10-31-atoms-new-parsing-system/" rel="external nofollow noopener" target="_blank">syntax tree based highlighting</a> still have no counterpart in other popular text editors—but very slow. It is an Electron<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup> app and not a particularly efficient one. A single Atom window would routinely consume 1GB or more of memory. So I was excited when I heard about <a href="https://github.com/atom-archive/xray" rel="external nofollow noopener" target="_blank">Xray</a>, a new project on GitHub by GitHub that might serve as a replacement for Atom. The codebase was primarily in Rust, giving it the speed and lightness Atom lacked. People on the <atom.io> forums thought it might become Atom 2.0.</atom.io></p> <p>Inside Xray, text is represented as a <strong>conflict-free replicated data type</strong> (CRDT). Each machine keeps its own version or <strong>replica</strong> of the data structure on which users make local changes. Differing replicas can then be merged in a consistent manner without relying a central coordinating server. There is no conflict having multiple differing replicas. Since merges may be performed with as few as 2 replicas, we can consider it a binary operation $+$, albeit one that is mostly used in place. For the merge operation to be invariant to operation order, $+$ should be associative and commutative (hence the use of additive notation).</p> <figure> <picture> <source class="responsive-img-srcset" srcset="https://github.com/atom-archive/xray/blob/master/docs/images/crdt?raw=trueg-480.webp 480w,https://github.com/atom-archive/xray/blob/master/docs/images/crdt?raw=trueg-800.webp 800w,https://github.com/atom-archive/xray/blob/master/docs/images/crdt?raw=trueg-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="https://github.com/atom-archive/xray/blob/master/docs/images/crdt.png?raw=trueg" class="img-fluid" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Suppose we have $a, b, c$ replicas that should merge consistently in any order. That is, we want to be able to rearrange $(a + b) + c$ without changing the value of the expression. If $+$ is commutative, we can swap the replicas within the parentheses as is.</p> \[(a + b) + c = (b + a) + c \qquad\text{commutative property}\] <p>To swap across parentheses, we need to be about to shift the parentheses.</p> \[\begin{align*} (a + b) + c &amp;= a + (b + c) &amp;&amp;\text{associative property} \\ &amp;= a + (c + b) &amp;&amp;\text{commutative property} \\ &amp;= (a + c) + b &amp;&amp;\text{associative property} \end{align*}\] <p>With enough pairwise swaps, we can arbitrarily reorder this expression.</p> <p>After Microsoft’s purchase of GitHub, it now owned Atom along with the more popular and performant VSCode. Atom was redundant. Over the course of year, updates became smaller and less frequent. By mid-2019, posts on <a href="https://blog.atom.io/" rel="external nofollow noopener" target="_blank">https://blog.atom.io/</a> stopped. The Xray project was <a href="https://github.com/atom-archive/xray/pull/183" rel="external nofollow noopener" target="_blank">archived</a> on GitHub. Development effort was redirected to VSCode where it soon surpassed Atom in overall features. I switched to VSCode permanently in Fall 2019. While Xray/Atom 2.0 may have failed, CRDTs have just started to succeed, seeing usage in applications from <a href="https://crdt.tech/implementations" rel="external nofollow noopener" target="_blank">databases to chat messages to text editors</a>. Perhaps their greatest feature is equality; no replica is privileged over others. In a computing ecosystem that is all too centralized, CRDTs could help power the more distributed apps of the future.</p> <h2 id="basic-crdts">Basic CRDTs</h2> <h3 id="counters">Counters</h3> <p>The most basic CRDT is the <strong>grow only counter</strong> which can only be incremented. Suppose we have peers $1, \dots, n$ in a computer network. A grow only counter $A$ is a $n$-tuple where $A_i$ counts the number of increases by peer $i$. The value of the grow-only counter is the sum of all entries $A_1 + \dots + A_n$. Merges with another grow-only counter $B$ are performed by setting $A_i = \max(A_i, B_i)$ for each $1 \leq i \leq n$.</p> <p>Why do we need to track increments individually for each peer? Why couldn’t we use a single register whose value is the total number of increments? Suppose we have 3 counters $a, b, c$ connected over the Internet. Replica $a$ wants to merge with replicas $b$ and $c$, but replica $c$ has already merged with replica $b$. So replica $a$ effectively merges with replica $b$ two times, but this should have no effect on the final result.</p> \[a + b = a + b + b\] <p>Merges should be idempotent. The addition of integers is not idempotent. The $\max(\cdot, \cdot)$​​​ of integers is however; repeated elements do not change the maximum of a set.</p> \[\max(\max(a, b), b) = \max(a, b)\] <p>Since only peer $i$ can increment its entry in the grow-only counter, its replica will have the largest $i$th entry in the system. Merges with every other replica are guaranteed to produce an accurate grow only counter. The Github repo containing basic CRDT implementations is <a href="https://github.com/GeorgeRPu/Conflict-Free-Replicated-Data-Types" rel="external nofollow noopener" target="_blank">https://github.com/GeorgeRPu/Conflict-Free-Replicated-Data-Types</a>.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">GCounter</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">;</span>        <span class="c1">// number of peers</span>
    <span class="kt">int</span> <span class="n">peer_id</span><span class="p">;</span>  <span class="c1">// unique id between 0 and n - 1</span>
    <span class="kt">int</span><span class="o">*</span> <span class="n">inc</span><span class="p">;</span>     <span class="c1">// number of incremements for each peer</span>
<span class="nl">public:</span>
    <span class="n">GCounter</span><span class="p">(</span><span class="kt">int</span> <span class="n">peer_id</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">peer_id</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">);</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">peer_id</span> <span class="o">=</span> <span class="n">peer_id</span><span class="p">;</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
        <span class="n">inc</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="n">n</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">increment</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">inc</span><span class="p">[</span><span class="n">peer_id</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">int</span> <span class="nf">value</span><span class="p">()</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">value</span> <span class="o">+=</span> <span class="n">inc</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">value</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">merge</span><span class="p">(</span><span class="n">GCounter</span><span class="o">*</span> <span class="n">other</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">inc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">inc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">-&gt;</span><span class="n">inc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">?</span> <span class="n">inc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">:</span> <span class="n">other</span><span class="o">-&gt;</span><span class="n">inc</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div> <p>We can create a <strong>positive-negative counter</strong> out of two grow-only counters. One tracks the number of increments for each peer in the system. The other tracks the number of decrements for each peer in the system. Why can’t we just allow decrements on a grow-only counter? Consider two grow-only counters $A = (0, 0), B = (0, 0)$ in a system containing two machines.</p> <table> <thead> <tr> <th>Order</th> <th>Action</th> <th>A</th> <th>B</th> </tr> </thead> <tbody> <tr> <td>1</td> <td>Peer 1 increments $A$</td> <td>$(1, 0)$</td> <td>$(0, 0)$</td> </tr> <tr> <td>2</td> <td>Peer 2 merges with $B$ with $A$</td> <td>$(1,0)$</td> <td>$(1, 0)$</td> </tr> <tr> <td>3</td> <td>Peer 1 decrements $A$</td> <td>$(0, 0)$</td> <td>$(1, 0)$</td> </tr> </tbody> </table> <p>Now if Peer 2 tries to perform another merger, it will not accept the decrement: $B$ will remain $(1, 0)$. In fact, there is no merger rule that will work, because $A$ could have any value from any number of increments and decrements. One solution might be to trust $A$’s first entry over $B$’s, but now certain replicas have higher status than others. They are unequal.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PNCounter</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">;</span>          <span class="c1">// number of peers</span>
    <span class="kt">int</span> <span class="n">peer_id</span><span class="p">;</span>    <span class="c1">// unique id between 0 and n - 1</span>
    <span class="n">GCounter</span><span class="o">*</span> <span class="n">inc</span><span class="p">;</span>  <span class="c1">// increment gcounter</span>
    <span class="n">GCounter</span><span class="o">*</span> <span class="n">dec</span><span class="p">;</span>  <span class="c1">// decrement gcounter</span>
<span class="nl">public:</span>
    <span class="n">PNCounter</span><span class="p">(</span><span class="kt">int</span> <span class="n">peer_id</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">inc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GCounter</span><span class="p">(</span><span class="n">peer_id</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
        <span class="n">dec</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GCounter</span><span class="p">(</span><span class="n">peer_id</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">increment</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">inc</span><span class="o">-&gt;</span><span class="n">increment</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">decrement</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">dec</span><span class="o">-&gt;</span><span class="n">increment</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kt">int</span> <span class="nf">value</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">inc</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">()</span> <span class="o">-</span> <span class="n">dec</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">merge</span><span class="p">(</span><span class="n">PNCounter</span><span class="o">*</span> <span class="n">other</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">inc</span><span class="o">-&gt;</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="o">-&gt;</span><span class="n">inc</span><span class="p">);</span>
        <span class="n">dec</span><span class="o">-&gt;</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="o">-&gt;</span><span class="n">dec</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div> <h3 id="sets">Sets</h3> <p>The most basic collection is a set. Elements are either members or they are not. The simplest set CRDT is the <strong>grow-only set</strong> where only additions are allowed. Replicas are merged by taking the union.</p> \[A = A \cup B\] <p>The union in akin to the $\max$ operation used for the grow only counter. We can order sets by inclusion. That is, $A \leq B$ if and only if $A \subseteq B$. The union is then the smallest set that is greater than $A$ and $B$, just as $\max(a, b)$ is the smallest element that is greater than the two numbers $a$ and $b$. However, because inclusion is a partial order (not every pair of sets are comparable), the union is generally not $A$ or $B$​.</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2020-07-20/partial-total-order-480.webp 480w,/assets/img/2020-07-20/partial-total-order-800.webp 800w,/assets/img/2020-07-20/partial-total-order-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/2020-07-20/partial-total-order.png" class="img-fluid" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Arrows indicate greater than relationships.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;unordered_set&gt;</span><span class="c1">;</span><span class="cp">
</span>
<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="p">&gt;;</span>
<span class="k">class</span> <span class="nc">GSet</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">std</span><span class="o">::</span><span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span> <span class="n">set</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">GSet</span><span class="p">()</span> <span class="p">{}</span>

    <span class="kt">void</span> <span class="nf">add</span><span class="p">(</span><span class="n">T</span> <span class="n">el</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">set</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">el</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">bool</span> <span class="nf">has</span><span class="p">(</span><span class="n">T</span> <span class="n">el</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">set</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="o">!=</span> <span class="n">set</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">merge</span><span class="p">(</span><span class="n">GSet</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span><span class="o">*</span> <span class="n">other</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">T</span> <span class="n">el</span> <span class="o">:</span> <span class="n">other</span><span class="o">-&gt;</span><span class="n">set</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">set</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">el</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div> <p>Like the positive-negative counter, we can construct a full set CRDT from a pair of grow-only sets. One grow-only set $A$ records all the elements added. The other grow-only set $R$ records all the elements removed. If an element $x \in A$ but $x \notin R$ or vice versa, $x$’s membership in the set is clear. If $x \in A$ <em>and</em> $x \in R$, we need a mechanism to break the tie. One option is to resolve the tie is to prefer removals over additions (or additions over removals). If $x \in A$ <em>and</em> $x \in R$, we could say $x$ is not in the set. How $x$ be removed from the set if it was not first made a member? The removal is assumed to have occurred last.</p> <p>We can explicitly determine which operation was last if we record the time each addition/removal took place. For each element in $A$​ or $R$​, we store the timestamp in a hashmap<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup>. To determine set membership in the case $x \in A, x \in R$​, we check the timestamp of the addition/removal, with the last one winning. For this reason, this CRDT is called a <strong>last write wins set</strong>. To merge the hashmaps, we just use the later timestamp.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="c1">;</span><span class="cp">
#include</span> <span class="cpf">&lt;unordered_map&gt;</span><span class="c1">;</span><span class="cp">
</span>
<span class="k">using</span> <span class="n">time_point</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">time_point</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">system_clock</span><span class="o">&gt;&gt;</span><span class="p">;</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="p">&gt;;</span>
<span class="k">class</span> <span class="nc">LWWSet</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">GSet</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span><span class="o">*</span> <span class="n">add_set</span><span class="p">;</span>                             <span class="c1">// element additions</span>
    <span class="n">GSet</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span><span class="o">*</span> <span class="n">rm_set</span><span class="p">;</span>                              <span class="c1">// element removals</span>
    <span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">time_point</span><span class="o">&gt;</span><span class="p">;</span> <span class="n">add_times</span><span class="p">;</span>  <span class="c1">// timestamps for element additions</span>
    <span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">time_point</span><span class="o">&gt;</span><span class="p">;</span> <span class="n">rm_times</span><span class="p">;</span>   <span class="c1">// timestamps for element removals</span>
<span class="nl">public:</span>
    <span class="n">LWWSet</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">add_set</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GSet</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;();</span>
        <span class="n">rm_set</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GSet</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;();</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">add</span><span class="p">(</span><span class="n">T</span> <span class="n">el</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">add_set</span><span class="o">-&gt;</span><span class="n">add</span><span class="p">(</span><span class="n">el</span><span class="p">);</span>
        <span class="n">add_times</span><span class="p">[</span><span class="n">el</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">system_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">remove</span><span class="p">(</span><span class="n">T</span> <span class="n">el</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">rm_set</span><span class="o">-&gt;</span><span class="n">add</span><span class="p">(</span><span class="n">el</span><span class="p">);</span>
        <span class="n">rm_times</span><span class="p">[</span><span class="n">el</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">system_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kt">bool</span> <span class="nf">has</span><span class="p">(</span><span class="n">T</span> <span class="n">el</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">add_set</span><span class="o">-&gt;</span><span class="n">has</span><span class="p">(</span><span class="n">el</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="c1">// add_set must have el</span>
        <span class="p">}</span> <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="o">!</span><span class="n">rm_set</span><span class="o">-&gt;</span><span class="n">has</span><span class="p">(</span><span class="n">el</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="c1">// both add_set and rm_set have el</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// favors removes if timestamps are identical</span>
            <span class="k">return</span> <span class="n">add_times</span><span class="p">[</span><span class="n">el</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">rm_times</span><span class="p">[</span><span class="n">el</span><span class="p">]</span> <span class="o">?</span> <span class="nb">true</span> <span class="o">:</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">merge</span><span class="p">(</span><span class="n">LWWSet</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span><span class="o">*</span> <span class="n">other</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">add_set</span><span class="o">-&gt;</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="o">-&gt;</span><span class="n">add_set</span><span class="p">);</span>
        <span class="n">rm_set</span><span class="o">-&gt;</span><span class="n">merge</span><span class="p">(</span><span class="n">other</span><span class="o">-&gt;</span><span class="n">rm_set</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">time_point</span><span class="o">&gt;</span><span class="p">;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">other</span><span class="o">-&gt;</span><span class="n">add_times</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">T</span> <span class="n">el</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="n">first</span><span class="p">;</span>
            <span class="n">time_point</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="n">second</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">add_times</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="o">==</span> <span class="n">add_times</span><span class="p">.</span><span class="n">end</span><span class="p">()</span> <span class="o">||</span> <span class="n">el</span> <span class="o">&gt;</span> <span class="n">add_times</span><span class="p">[</span><span class="n">timestamp</span><span class="p">])</span> <span class="p">{</span>
                <span class="n">add_times</span><span class="p">[</span><span class="n">el</span><span class="p">]</span> <span class="o">=</span> <span class="n">timestamp</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">time_point</span><span class="o">&gt;</span><span class="p">;</span> <span class="n">x</span> <span class="o">:</span> <span class="n">other</span><span class="o">-&gt;</span><span class="n">rm_times</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">T</span> <span class="n">el</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="n">first</span><span class="p">;</span>
            <span class="n">time_point</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="n">second</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">rm_times</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="o">==</span> <span class="n">rm_times</span><span class="p">.</span><span class="n">end</span><span class="p">()</span> <span class="o">||</span> <span class="n">timestamp</span> <span class="o">&gt;</span> <span class="n">rm_times</span><span class="p">[</span><span class="n">el</span><span class="p">])</span> <span class="p">{</span>
                <span class="n">rm_times</span><span class="p">[</span><span class="n">el</span><span class="p">]</span> <span class="o">=</span> <span class="n">timestamp</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div> <h2 id="building-a-collaborative-text-editor">Building a Collaborative Text Editor</h2> <h3 id="rga">RGA</h3> <p>We can represent text as a variable length sequence of characters. In order to read/write to the text, we need the following operations.</p> <ul> <li> <code class="language-plaintext highlighter-rouge">char get(int i)</code>. Returns the character at position $i$.</li> <li> <code class="language-plaintext highlighter-rouge">void insert(int i, char charachter)</code>. Inserts a character after position $i$.</li> <li> <code class="language-plaintext highlighter-rouge">void remove(int i)</code>. Marks the character at position $i$ as a tombstone (deleted).</li> <li> <code class="language-plaintext highlighter-rouge">void update(int i, char character)</code>. Set the character at position $i$ Note that we could accomplish an update by removing the existing character at position $i$ and inserting the character after position $i - 1$.</li> </ul> <p><strong>Replicated growable array (RGA)</strong> is a CRDT that supports these operations <a class="citation" href="#roh2011replicated">(Roh et al., 2011)</a>. Ironically, it is a linked list of nodes. Each node has an <strong>identifier</strong>, a last update/remove timestamp, a character, and a pointer to the next node. The identifier is the tuple $(insertion_time, inserting_machine_id)$.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="c1">;</span><span class="cp">
#include</span> <span class="cpf">&lt;unordered_map&gt;</span><span class="c1">;</span><span class="cp">
</span>
<span class="k">using</span> <span class="n">time_point</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">time_point</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">system_clock</span><span class="o">&gt;</span><span class="p">;</span>

<span class="k">struct</span> <span class="nc">Node</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">peer_id</span><span class="p">;</span>
    <span class="n">time_point</span> <span class="n">insertion_time</span><span class="p">;</span>
    <span class="n">time_point</span> <span class="n">last_updated_time</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">character</span><span class="p">;</span>
    <span class="n">Node</span><span class="o">*</span> <span class="n">next</span><span class="p">;</span>

    <span class="n">Node</span><span class="p">(</span><span class="kt">int</span> <span class="n">peer_id</span><span class="p">,</span> <span class="kt">char</span> <span class="n">character</span><span class="p">,</span> <span class="n">Node</span><span class="o">*</span> <span class="n">next</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">peer_id</span> <span class="o">=</span> <span class="n">peer_id</span><span class="p">;</span>
        <span class="n">insertion_time</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">system_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
        <span class="n">last_updated_time</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">system_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">character</span> <span class="o">=</span> <span class="n">character</span><span class="p">;</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div> <p>The get and update operations work identically to their regular linked list counterparts. For convenience, we define a <code class="language-plaintext highlighter-rouge">Node* node_at(int i)</code> method that grabs the $i$th item in the RGA by looping through <code class="language-plaintext highlighter-rouge">next</code> pointers.</p> <ul> <li>We can get character $i$ by returning the character field of the <code class="language-plaintext highlighter-rouge">node_at(i)</code>.</li> <li>We can update a character by setting <code class="language-plaintext highlighter-rouge">node_at(i)-&gt;character</code> to the new character. We also refresh the <code class="language-plaintext highlighter-rouge">last_updated_time</code>.</li> </ul> <p>Instead of actually removing node, we set them to a special, 0 byte, tombstone character. Tombstones will not be included when displaying the RGA.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">const</span> <span class="kt">char</span> <span class="n">TOMBSTONE</span> <span class="o">=</span> <span class="sc">'\0'</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">RGA</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="kt">int</span> <span class="n">peer_id</span><span class="p">;</span>
    <span class="n">Node</span><span class="o">*</span> <span class="n">head</span><span class="p">;</span>

    <span class="n">Node</span><span class="o">*</span> <span class="n">node_at</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Node</span><span class="o">*</span> <span class="n">node</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">counter</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">counter</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">node</span><span class="p">;</span>
    <span class="p">}</span>

<span class="k">public</span><span class="o">:</span>
    <span class="n">RGA</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">head</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">char</span> <span class="nf">get</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">node_at</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">character</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">remove</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Node</span><span class="o">*</span> <span class="n">node</span> <span class="o">=</span> <span class="n">node_at</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
        <span class="n">node</span><span class="o">-&gt;</span><span class="n">c</span> <span class="o">=</span> <span class="n">TOMBSTONE</span><span class="p">;</span>
        <span class="n">node</span><span class="o">-&gt;</span><span class="n">last_updated_time</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">system_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">update</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">char</span> <span class="n">character</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Node</span><span class="o">*</span> <span class="n">node</span> <span class="o">=</span> <span class="n">node_at</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
        <span class="n">node</span><span class="o">-&gt;</span><span class="n">character</span> <span class="o">=</span> <span class="n">character</span><span class="p">;</span>
        <span class="n">node</span><span class="o">-&gt;</span><span class="n">last_updated_time</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">system_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div> <p>Insertions are different. We cannot always add a new node to the exact right of the <code class="language-plaintext highlighter-rouge">node_at(i)</code> in order to preserve the intentions of other inserts. If we order identifiers lexicographically—by their first item and, in case of a tie, by their second item—then an inserted node with a succeeding identifier must, in general, be inserted later. The intention of the later insert should have higher priority. Hence, we put new node nearer the <code class="language-plaintext highlighter-rouge">node_at(i)</code>.</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2020-07-20/rga-insertion-480.webp 480w,/assets/img/2020-07-20/rga-insertion-800.webp 800w,/assets/img/2020-07-20/rga-insertion-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/2020-07-20/rga-insertion.png" class="img-fluid" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Figure taken from <a class="citation" href="#roh2011replicated">(Roh et al., 2011)</a>. In <a class="citation" href="#roh2011replicated">(Roh et al., 2011)</a>, a hashmap is used to map identifiers to nodes, which we have omitted.</p> <p>It remains to show that this insertion rule is invariant to the order of the insertions, which we do by example. Suppose 3 peers work on a collaborative document. The initial state of RGA is $[n_1, n_5]$ with respective identifiers $i_1 = (0, 2)$ and $i_5 = (2, 1)$. The peers insert a node just after $n_1$ without any intervening merges.</p> <ol> <li>Operation $o_4$: Peer 0 inserts $n_4$, whose identifier is $i_4 = (0, 3)$.</li> <li>Operation $o_3$: Peer 1 inserts $n_3$ with $i_3 = (1, 4)$.</li> <li>Operation $o_2$: Peer 2 inserts $n_2$ with $i_2 = (2, 5)$.</li> </ol> <p>Therefore, $i_2 &lt; i_3 &lt; i_4 &lt; i_5$. The result below shows for each peer a different execution order, which nonetheless reach a convergent state.</p> \[\begin{align*} &amp;[n_1, n_5] \stackrel{o_4}{\longrightarrow} [n_1, n_4, n_5] \stackrel{o_2}{\longrightarrow} [n_1, n_2, n_4, n_5] \stackrel{o_3}{\longrightarrow} [n_1, n_2, n_3, n_4, n_5] \\ &amp;[n_1, n_5] \stackrel{o_3}{\longrightarrow} [n_1, n_3, n_5] \stackrel{o_2}{\longrightarrow} [n_1, n_2, n_3, n_5] \stackrel{o_4}{\longrightarrow} [n_1, n_2, n_3, n_4, n_5] \\ &amp;[n_1, n_5] \stackrel{o_2}{\longrightarrow} [n_1, n_2, n_5] \stackrel{o_3}{\longrightarrow} [n_1, n_2, n_3, n_5] \stackrel{o_4}{\longrightarrow} [n_1, n_2, n_3, n_4, n_5] \end{align*}\] <h3 id="rgasplit">RGASplit</h3> <p>One problem with RGA is that node retrieval can be slow, with a time complexity of $O(n)$. The method <code class="language-plaintext highlighter-rouge">node_at(int i)</code> must loop through $i$ nodes to get the desired node. As our text grows to a considerable size, a collaborative text editor using RGA will slow down. <strong>RGASplit</strong> solves this problem by arranging non-tombstone nodes into a binary tree <a class="citation" href="#briot2016high">(Briot Loı̈ck et al., 2016)</a>. Each node stores an additional weight that counts the number of nodes in its subtree along with obligatory left and right pointers.</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2020-07-20/rgasplit-480.webp 480w,/assets/img/2020-07-20/rgasplit-800.webp 800w,/assets/img/2020-07-20/rgasplit-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/2020-07-20/rgasplit.png" class="img-fluid" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Figure taken from <a class="citation" href="#briot2016high">(Briot Loı̈ck et al., 2016)</a>.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="c1">;</span><span class="cp">
#include</span> <span class="cpf">&lt;unordered_map&gt;</span><span class="c1">;</span><span class="cp">
</span>
<span class="k">using</span> <span class="n">time_point</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">time_point</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">system_clock</span><span class="o">&gt;</span><span class="p">;</span>

<span class="k">struct</span> <span class="nc">Node</span> <span class="p">{</span>
    <span class="c1">// RGA</span>
    <span class="n">time_point</span> <span class="n">insertion_time</span><span class="p">;</span>
    <span class="n">time_point</span> <span class="n">last_updated_time</span><span class="p">;</span>  <span class="c1">// updates or removes</span>
    <span class="kt">char</span> <span class="n">character</span><span class="p">;</span>
    <span class="n">Node</span><span class="o">*</span> <span class="n">next</span><span class="p">;</span>
    <span class="c1">// RGASplit</span>
    <span class="kt">int</span> <span class="n">weight</span><span class="p">;</span>
    <span class="n">Node</span><span class="o">*</span> <span class="n">left</span><span class="p">;</span>
    <span class="n">Node</span><span class="o">*</span> <span class="n">right</span><span class="p">;</span>

    <span class="n">Node</span><span class="p">(</span><span class="kt">char</span> <span class="n">character</span><span class="p">,</span> <span class="n">Node</span><span class="o">*</span> <span class="n">next</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">insertion_time</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">system_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
        <span class="n">last_updated_time</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">system_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">character</span> <span class="o">=</span> <span class="n">character</span><span class="p">;</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div> <p>The weights are used to navigate the binary tree. Say we want to find the $i$th character in the below binary tree.</p> <ul> <li>The 4th character. We start at the root of the tree and see that the left subtree contains the first 3 characters while the right subtree contains the last 4 characters. Thus, the 4th character is “S”.</li> <li>The 1st character. We start at the root again. It has a left subtree which contains preceding characters. Looking at the “G” node, we notice it too has an active left pointer. Since “R” has no children, it is the first character.</li> <li>The 7th character. Starting from the root, we now go down the right subtree, since $7 &gt; 3 + 1$. Because there are 4 characters outside this subtree, the 7th character in the entire tree is equivalent to the 3rd character in the right subtree. At the “i” node, we see that there is a “p” character on the left and a 2-weight subtree on the right. Finally, we reach the “i” node and see that it is the 7th character.</li> </ul> <pre><code class="language-mermaid">graph TD
    S[S, 8] --&gt; G[G, 3];
    S --&gt; l[l, 4];
    G --&gt; R[R, 1];
    G --&gt; A[A, 1];
    l --&gt; p[p, 1];
    l --&gt; i[i, 2];
    i --&gt; T[T, 1];
    i --&gt; null[null]
</code></pre> <p>To add nodes, RGASplit uses the usual binary tree insertion logic. You move left/right down the tree until you reach a non-branch (one left or right pointer is not <code class="language-plaintext highlighter-rouge">nullptr</code>). To change the capital “T” to a lowercase “t”, we need to delete it and insert the lowercase “t” after “i”. The delete operation navigates the tree using the same logic as above to retrieve the proper node, setting its character to tombstone (shortened to TS). The insert operation first navigates to the location of the “i” node. We know that “t” should be immediately after “i”, since “t” has a later insertion time than the tombstone character. We go to the right and arrive at the tombstone character, where “t” is attached to its left pointer.</p> <pre><code class="language-mermaid">graph TD
    S[S, 8] --&gt; G[G, 3];
    S --&gt; l[l, 4];
    G --&gt; R[R, 1];
    G --&gt; A[A, 1];
    l --&gt; p[p, 1];
    l --&gt; i[i, 2];
    i --&gt; null[null];
    i --&gt; T[TS, 1];
    T --&gt; t[t, 1];
    T --&gt; null2[null];
</code></pre> <p>Note that there are multiple binary trees that could represent the same ordering of objects. RGASplit treats these similarly, allowing each peer to self-balance its binary tree as it sees fit.</p> <h2 id="beyond-shared-documents">Beyond Shared Documents</h2> <p>CRDTs are a young invention. WOOT—”the first CRDT algorithm proposed for group editing”—was published in 2006. The first CRDTs were a reaction to an older technology <strong>operation transform</strong> (OT). OT would transform successive operations to be compatible with preceding operations. Many OT algorithms turned out to be incorrect. One of the few that was—and ended up powering Google Docs—required all traffic go through a central server. And while their origins might revolve around collaborative editing a la Google Docs, their future does not have to be. CRDTs allow for decentralized versions of many web-apps, but CRDTs could be used in multithreaded programs to maximize usage of multiple cores. This was how CRDTs would be used in X-ray, allowing multiple extensions to tamper with the text simultaneously without fear of inconsistency.</p> <iframe style="iframe { aspect-ratio: 560/315; height: auto; width: 100%; }" height="315" width="550" src="https://www.youtube.com/embed/x7drE24geUw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe> <p>CRDTs are seeing increasing use in a variety of <a href="https://crdt.tech/implementations" rel="external nofollow noopener" target="_blank">very popular applications</a>. Engineers are improving available open source implementations, making them smaller and faster. Researchers are working on expanding the scope of CRDTs, such as to all JSON objects <a class="citation" href="#kleppmann2017conflict">(Kleppmann &amp; Beresford, 2017)</a>. CRDTs are getting better and better. I do not think this will stop anytime soon.</p> <h2 id="references">References</h2> <h2 class="bibliography">2017</h2> <ol class="bibliography"><li><span id="kleppmann2017conflict">Kleppmann, M., &amp; Beresford, A. R. (2017). A conflict-free replicated JSON datatype. <i>IEEE Transactions on Parallel and Distributed Systems</i>, <i>28</i>(10), 2733–2746. https://ieeexplore.ieee.org/abstract/document/7909007</span></li></ol> <h2 class="bibliography">2016</h2> <ol class="bibliography"><li><span id="briot2016high">Briot Loı̈ck, Urso, P., &amp; Shapiro, M. (2016). High responsiveness for group editing crdts. <i>Proceedings of the 19th International Conference on Supporting Group Work</i>, 51–60. https://lip6.fr/Marc.Shapiro/papers/rgasplit-group2016-11.pdf</span></li></ol> <h2 class="bibliography">2011</h2> <ol class="bibliography"><li><span id="roh2011replicated">Roh, H.-G., Jeon, M., Kim, J.-S., &amp; Lee, J. (2011). Replicated abstract data types: Building blocks for collaborative applications. <i>Journal of Parallel and Distributed Computing</i>, <i>71</i>(3), 354–368. http://csl.skku.edu/papers/jpdc11.pdf</span></li></ol> <hr> <div class="footnotes" role="doc-endnotes"> <ol> <li id="fn:1" role="doc-endnote"> <p>Electron was originally named <a href="https://www.electronjs.org/blog/electron" rel="external nofollow noopener" target="_blank">Atom Shell</a> because it was built for the Atom editor. Because the electrons orbiting atoms in pictures form a kind of shell, Electron was chosen as the new name. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">↩</a></p> </li> <li id="fn:2" role="doc-endnote"> <p>In a distributed system, there may not be an agreed upon time. That is, multiple computers’ clocks give different times. In this case, the sum of the <a href="https://en.wikipedia.org/wiki/Vector_clock" rel="external nofollow noopener" target="_blank">vector clock</a> can be used. A vector clock tracks the time of each machine in the system, updated by regular time messages. However, most modern computers can get an accurate time with millisecond level precision, so long as they’re connected to the Internet to receive regular synchronization messages. <a href="#fnref:2" class="reversefootnote" role="doc-backlink">↩</a></p> </li> </ol> </div> </div> </article> <br> <hr> <br> If you found this useful, please cite this as: <blockquote> <p>Pu, George (Jul 2020). Conflict Free Replicated Data Types. https://georgerpu.github.io.</p> </blockquote> <p>or as a BibTeX entry:</p> <div class="language-bibtex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">@article</span><span class="p">{</span><span class="nl">pu2020conflict-free-replicated-data-types</span><span class="p">,</span>
  <span class="na">title</span>   <span class="p">=</span> <span class="s">{Conflict Free Replicated Data Types}</span><span class="p">,</span>
  <span class="na">author</span>  <span class="p">=</span> <span class="s">{Pu, George}</span><span class="p">,</span>
  <span class="na">year</span>    <span class="p">=</span> <span class="s">{2020}</span><span class="p">,</span>
  <span class="na">month</span>   <span class="p">=</span> <span class="s">{Jul}</span><span class="p">,</span>
  <span class="na">url</span>     <span class="p">=</span> <span class="s">{https://georgerpu.github.io/blog/2020/crdt/}</span>
<span class="p">}</span>
</code></pre></div></div> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/exp-inflection-point/">The Inflection Point of the Exponential Function</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/film/">2023 in Film</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/blogging-4-years/">Blogging for 4 Years</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/economic-possiblities-for-ourselves/">Economic Possibilities for Ourselves</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/solutions-to-why-pi/">Solution to Why π is in the normal distribution (beyond integral tricks)</a> </li> <div id="giscus_thread" style="max-width: 930px; margin: 0 auto;"> <script>let giscusTheme=determineComputedTheme(),giscusAttributes={src:"https://giscus.app/client.js","data-repo":"GeorgeRPu/georgerpu.github.io","data-repo-id":"MDEwOlJlcG9zaXRvcnk2MDAyNDM2NQ==","data-category":"Comments","data-category-id":"","data-mapping":"title","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":giscusTheme,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,e])=>giscusScript.setAttribute(t,e)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 George Pu. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/mermaid@10.7.0/dist/mermaid.min.js" integrity="sha256-TtLOdUA8mstPoO6sGvHIGx2ceXrrX4KgIItO06XOn8A=" crossorigin="anonymous"></script> <script>let mermaidTheme=determineComputedTheme();document.addEventListener("readystatechange",()=>{"complete"===document.readyState&&(document.querySelectorAll("pre>code.language-mermaid").forEach(e=>{const t=e.textContent,d=e.parentElement;d.classList.add("unloaded");let a=document.createElement("pre");a.classList.add("mermaid");const n=document.createTextNode(t);a.appendChild(n),d.after(a)}),mermaid.initialize({theme:mermaidTheme}),"undefined"!=typeof d3&&window.addEventListener("load",function(){d3.selectAll(".mermaid svg").each(function(){var e=d3.select(this);e.html("<g>"+e.html()+"</g>");var t=e.select("g"),d=d3.zoom().on("zoom",function(e){t.attr("transform",e.transform)});e.call(d)})}))});</script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script defer src="https://cdn.jsdelivr.net/npm/bootstrap-table@1.22.4/dist/bootstrap-table.min.js" integrity="sha256-4rppopQE9POKfukn2kEvhJ9Um25Cf6+IDVkARD0xh78=" crossorigin="anonymous"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],processEscapes:!0,tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-publications",title:"publications",description:"publications by categories in reversed chronological order. generated by jekyll-scholar.",section:"Navigation",handler:()=>{window.location.href="/publications/"}},{id:"nav-projects",title:"projects",description:"A growing collection of my cool projects.",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-repositories",title:"repositories",description:"A growing collection of github repositories for my cool projects.",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"nav-cv",title:"cv",description:"Full academic CV is available as a PDF (button to the right). A condensed resume is provided below.",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"nav-teaching",title:"teaching",description:"Courses I have taught.",section:"Navigation",handler:()=>{window.location.href="/teaching/"}},{id:"post-the-inflection-point-of-the-exponential-function",title:"The Inflection Point of the Exponential Function",description:"Please stop referring to the &quot;inflection point&quot; of the exponential function.",section:"Posts",handler:()=>{window.location.href="/blog/2024/exp-inflection-point/"}},{id:"post-2023-in-film",title:"2023 in Film",description:"All the movies I watched in 2023",section:"Posts",handler:()=>{window.location.href="/blog/2023/film/"}},{id:"post-blogging-for-4-years",title:"Blogging for 4 Years",description:"Reflections on 4 years of georgerpu.github.io.",section:"Posts",handler:()=>{window.location.href="/blog/2023/blogging-4-years/"}},{id:"post-economic-possibilities-for-ourselves",title:"Economic Possibilities for Ourselves",description:"What Keynes got right and wrong in his famous essay.",section:"Posts",handler:()=>{window.location.href="/blog/2023/economic-possiblities-for-ourselves/"}},{id:"post-solution-to-why-\u03c0-is-in-the-normal-distribution-beyond-integral-tricks",title:"Solution to Why \u03c0 is in the normal distribution (beyond integral tricks)",description:"The (n-1)-volume of the boundary of a n-dimensional ball",section:"Posts",handler:()=>{window.location.href="/blog/2023/solutions-to-why-pi/"}},{id:"post-quasi-newton-methods-2-2-bfgs",title:"Quasi-Newton Methods (2/2): BFGS",description:"A derivation of the BFGS and L-BFGS algorithms.",section:"Posts",handler:()=>{window.location.href="/blog/2023/quasi-netwon-bfgs/"}},{id:"post-quasi-newton-methods-1-2-sr1",title:"Quasi-Newton Methods (1/2): SR1",description:"An introduction to quasi-Newton methods.",section:"Posts",handler:()=>{window.location.href="/blog/2023/quasi-newton-sr1/"}},{id:"post-2022-in-books",title:"2022 in Books",description:"All the books I read in 2022",section:"Posts",handler:()=>{window.location.href="/blog/2022/books/"}},{id:"post-advice-to-new-graduates-in-software-engineering",title:"Advice to New Graduates in Software Engineering",description:"Lessons from 1 year as a software engineer",section:"Posts",handler:()=>{window.location.href="/blog/2022/advice-to-new-grads/"}},{id:"post-solution-to-olympiad-level-counting",title:"Solution to Olympiad level counting",description:"How many subsets of {1,\u2026,2000} have a sum divisible by 5?",section:"Posts",handler:()=>{window.location.href="/blog/2022/solutions-to-olympiad/"}},{id:"post-how-to-control-for-confounding-variables",title:"How To Control For Confounding Variables",description:"Seperating signal from noise",section:"Posts",handler:()=>{window.location.href="/blog/2022/confounding/"}},{id:"post-2021-in-books",title:"2021 in Books",description:"All the books I read in 2021",section:"Posts",handler:()=>{window.location.href="/blog/2021/books/"}},{id:"post-new-mac-setup-2021",title:"New Mac Setup 2021",description:"Guide to setting up an ARM Mac for software development",section:"Posts",handler:()=>{window.location.href="/blog/2021/new-mac-setup/"}},{id:"post-federated-learning-of-cohorts",title:"Federated Learning of Cohorts",description:"The World Wide Web after 3rd party cookies",section:"Posts",handler:()=>{window.location.href="/blog/2021/floc/"}},{id:"post-writing-code-for-machine-learning-research",title:"Writing Code for (Machine Learning) Research",description:"Lessons from 3 years of computational science",section:"Posts",handler:()=>{window.location.href="/blog/2021/research-code/"}},{id:"post-notes-from-a-conversion-about-the-aesthetics-of-music",title:"Notes From a Conversion About the Aesthetics of Music",description:"A mathematical theory of the aesthetics of music",section:"Posts",handler:()=>{window.location.href="/blog/2021/aesthetics-of-music/"}},{id:"post-implementing-a-bittorrent-like-p2p-file-sharing-protocol",title:"Implementing a BitTorrent-like P2P File Sharing Protocol",description:"A lesson in software design",section:"Posts",handler:()=>{window.location.href="/blog/2021/bittorrent-client/"}},{id:"post-how-to-win-a-hackathon",title:"How to Win a Hackathon",description:"Tips from a 2-time SwampHacks winner",section:"Posts",handler:()=>{window.location.href="/blog/2020/how-to-win-a-hackathon/"}},{id:"post-conflict-free-replicated-data-types",title:"Conflict Free Replicated Data Types",description:"A survey of simple CRDTs and their future in computing",section:"Posts",handler:()=>{window.location.href="/blog/2020/crdt/"}},{id:"post-e-is-the-best-base",title:"$e$ is the Best Base",description:"And why we don&#39;t use it",section:"Posts",handler:()=>{window.location.href="/blog/2020/e-best-base/"}},{id:"post-one-table-many-normal-forms",title:"One Table, Many Normal Forms",description:"Why we have so many normal forms for relations",section:"Posts",handler:()=>{window.location.href="/blog/2020/one-table-many-forms/"}},{id:"post-2019-in-books",title:"2019 in Books",description:"All the books I read in 2019",section:"Posts",handler:()=>{window.location.href="/blog/2019/books/"}},{id:"post-federated-learning-fedavg-1-4",title:"Federated Learning: FedAvg (1/4)",description:"An introduction to federated learning",section:"Posts",handler:()=>{window.location.href="/blog/2019/federated-learning-fedavg/"}},{id:"post-the-cantor-set-minus-itself",title:"The Cantor Set Minus Itself",description:"A proof of that the Cantor Set minus itself is [0, 1]",section:"Posts",handler:()=>{window.location.href="/blog/2019/the-cantor-set-minus-itself/"}},{id:"news-i-am-thrilled-to-announce-that-i-have-been-promoted-to-software-development-engineer-ii-sde-ii-at-amazon-i-would-like-to-express-my-sincere-gratitude-to-my-colleagues-mentors-and-managers-who-have-supported-me-throughout-my-journey-their-guidance-feedback-and-work-is-as-responsible-for-any-success-as-my-own-efforts",title:"I am thrilled to announce that I have been promoted to Software Development Engineer II (SDE II) at Amazon! I would like to express my sincere gratitude to my colleagues, mentors, and managers who have supported me throughout my journey. Their guidance, feedback, and work is as responsible for any success as my own efforts.",description:"",section:"News"},{id:"news-my-senior-project-was-featured-in-the-university-of-florida-news-https-news-ufl-edu-2021-05-robo-dog",title:"My senior project was featured in the University of Florida [news](https://news.ufl.edu/2021/05/robo-dog/)!",description:"",section:"News"},{id:"news-communication-efficient-federated-learning-via-dataset-distillation-was-accepted-to-neurips-2020-spicyfl-http-icfl-cc-spicyfl-2020",title:"*Communication-efficient federated learning via dataset distillation* was accepted to [NeurIPS 2020 SpicyFL](http://icfl.cc/SpicyFL/2020)!",description:"",section:"News"},{id:"projects-dizviz",title:"DizViz",description:"Virtual reality for first responders",section:"Projects",handler:()=>{window.location.href="/projects/dizviz/"}},{id:"projects-opendoors",title:"OpenDoors",description:"Indoor navigation for the visually impaired",section:"Projects",handler:()=>{window.location.href="/projects/opendoors/"}},{id:"projects-tech-interview-prep",title:"Tech Interview Prep",description:"Catalog of technical interview questions and solutions.",section:"Projects",handler:()=>{window.location.href="/projects/tech-interview-prep/"}},{id:"projects-text-style-transfer",title:"Text Style Transfer",description:"Rewriting sentences in different authorial styles",section:"Projects",handler:()=>{window.location.href="/projects/text-style-transfer/"}},{id:"projects-time-trackr",title:"Time Trackr",description:"Single page web app for recording your day",section:"Projects",handler:()=>{window.location.href="/projects/time-trackr/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%70%75.%67%65%6F%72%67%65%39%39@%67%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-google-scholar",title:"Google Scholar",section:"Socials",handler:()=>{window.open("https://scholar.google.com/citations?user=STrAZpwAAAAJ","_blank")}},{id:"socials-semantic-scholar",title:"Semantic Scholar",section:"Socials",handler:()=>{window.open("https://www.semanticscholar.org/author/89053003","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/georgerpu","_blank")}},{id:"socials-linkedin",title:"LinkedIn",section:"Socials",handler:()=>{window.open("https://www.linkedin.com/in/george-r-pu","_blank")}},{id:"socials-rss",title:"RSS Feed",section:"Socials",handler:()=>{window.open("/feed.xml","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js"></script> </body> </html>